//X Definition Arrays
var wegeIDVgl = new Array();
for (var j = 0; j < wegeIDVgl.length; j++) {
    wegeIDVgl[j] = new Array(3);
    wegeIDVgl[zaehler]["WegeID 1"] = "";
    wegeIDVgl[zaehler]["WegeID 2"] = "";
    wegeIDVgl[zaehler]["UserID"] = "";

}
var wegeIDVglEinfach = new Array();
for (var l = 0; l < wegeIDVglEinfach.length; l++) {
    wegeIDVglEinfach[l] = new Array(3);
    wegeIDVglEinfach[zaehler]["WegeID 1"] = "";
    wegeIDVglEinfach[zaehler]["WegeID 2"] = "";
    wegeIDVglEinfach[zaehler]["UserID"] = "";
}

var wegeIDVglStartzeit = new Array();
for (var d = 0; d < wegeIDVglStartzeit.length; d++) {
    wegeIDVglStartzeit[d] = new Array(3);
    wegeIDVglStartzeit[zaehler]["WegeID 1"] = "";
    wegeIDVglStartzeit[zaehler]["WegeID 2"] = "";
    wegeIDVglStartzeit[zaehler]["UserID"] = "";
}

var wegeIDVglDauerUmstieg = new Array();
for (var c = 0; c < wegeIDVglDauerUmstieg.length; c++) {
    wegeIDVglDauerUmstieg[c] = new Array(3);
    wegeIDVglDauerUmstieg[zaehler]["WegeID 1"] = "";
    wegeIDVglDauerUmstieg[zaehler]["WegeID 2"] = "";
    wegeIDVglDauerUmstieg[zaehler]["UserID"] = "";
}

var wegeIDVglNutzerID = new Array();
for (var p = 0; p < wegeIDVglNutzerID.length; p++) {
    wegeIDVglNutzerID[p] = new Array(3);
    wegeIDVglNutzerID[zaehler]["WegeID 1"] = "";
    wegeIDVglNutzerID[zaehler]["WegeID 2"] = "";
    wegeIDVglNutzerID[zaehler]["UserID"] = "";
}

var wegeIDVglStartEndKoordinaten = new Array();
for (var p = 0; p < wegeIDVglStartEndKoordinaten.length; p++) {
    wegeIDVglStartEndKoordinaten[p] = new Array(3);
    wegeIDVglStartEndKoordinaten[zaehler]["WegeID 1"] = "";
    wegeIDVglStartEndKoordinaten[zaehler]["WegeID 2"] = "";
    wegeIDVglStartEndKoordinaten[zaehler]["UserID"] = "";
}

var wegeIDVglGesamtdistanz = new Array();
for (var p = 0; p < wegeIDVglGesamtdistanz.length; p++) {
    wegeIDVglGesamtdistanz[p] = new Array(3);
    wegeIDVglGesamtdistanz[zaehler]["WegeID 1"] = "";
    wegeIDVglGesamtdistanz[zaehler]["WegeID 2"] = "";
    wegeIDVglGesamtdistanz[zaehler]["UserID"] = "";
}

var wegeIDVglGesamtdauer = new Array();
for (var p = 0; p < wegeIDVglGesamtdauer.length; p++) {
    wegeIDVglGesamtdauer[p] = new Array(3);
    wegeIDVglGesamtdauer[zaehler]["WegeID 1"] = "";
    wegeIDVglGesamtdauer[zaehler]["WegeID 2"] = "";
    wegeIDVglGesamtdauer[zaehler]["UserID"] = "";
}

var wegeIDVglKoordinaten = new Array();
for (var g = 0; g < wegeIDVglKoordinaten.length; g++) {
    wegeIDVglKoordinaten[g] = new Array(3);
    wegeIDVglKoordinaten[zaehler]["WegeID 1"] = "";
    wegeIDVglKoordinaten[zaehler]["WegeID 2"] = "";
    wegeIDVglKoordinaten[zaehler]["UserID"] = "";
}

var wegeIDVglKoordinatenUmstieg = new Array();
for (var h = 0; h < wegeIDVglKoordinatenUmstieg.length; h++) {
    wegeIDVglKoordinatenUmstieg[h] = new Array(3);
    wegeIDVglKoordinatenUmstieg[zaehler]["WegeID 1"] = "";
    wegeIDVglKoordinatenUmstieg[zaehler]["WegeID 2"] = "";
    wegeIDVglKoordinatenUmstieg[zaehler]["UserID"] = "";
}

var wegeIDVglWegezweck = new Array();
for (var b = 0; b < wegeIDVglWegezweck.length; b++) {
    wegeIDVglWegezweck[b] = new Array(3);
    wegeIDVglWegezweck[zaehler]["WegeID 1"] = "";
    wegeIDVglWegezweck[zaehler]["WegeID 2"] = "";
    wegeIDVglWegezweck[zaehler]["UserID"] = "";
}
var wegeIDVglVerkehrsmittel = new Array();
for (var f = 0; c < wegeIDVglVerkehrsmittel.length; f++) {
    wegeIDVglVerkehrsmittel[f] = new Array(3);
    wegeIDVglVerkehrsmittel[zaehler]["WegeID 1"] = "";
    wegeIDVglVerkehrsmittel[zaehler]["WegeID 2"] = "";
    wegeIDVglVerkehrsmittel[zaehler]["UserID"] = "";
}

var wegeIDVglWegepaare = new Array();
for (var a = 0; a < wegeIDVglWegepaare.length; a++) {
    wegeIDVglWegepaare[a] = new Array(3);
    wegeIDVglWegepaare[zaehler]["WegeID 1"] = "";
    wegeIDVglWegepaare[zaehler]["WegeID 2"] = "";
    wegeIDVglWegepaare[zaehler]["UserID"] = "";
}

var wegeIDVglWegepaareFilter = new Array();
for (var a = 0; a < wegeIDVglWegepaareFilter.length; a++) {
    wegeIDVglWegepaareFilter[a] = new Array(3);
    wegeIDVglWegepaareFilter[zaehler]["WegeID 1"] = "";
    wegeIDVglWegepaareFilter[zaehler]["WegeID 2"] = "";
    wegeIDVglWegepaareFilter[zaehler]["UserID"] = "";
}

var wegeIDVglWegepaareFilter1 = new Array();
for (var a = 0; a < wegeIDVglWegepaareFilter1.length; a++) {
    wegeIDVglWegepaareFilter1[a] = new Array(3);
    wegeIDVglWegepaareFilter1[zaehler]["WegeID 1"] = "";
    wegeIDVglWegepaareFilter1[zaehler]["WegeID 2"] = "";
    wegeIDVglWegepaareFilter1[zaehler]["UserID"] = "";
}

var wegeIDVglWegepaareAnfang = new Array();
for (var k = 0; k < wegeIDVglWegepaareAnfang.length; k++) {
    wegeIDVglWegepaareAnfang[k] = new Array(4);
    wegeIDVglWegepaareAnfang[zaehler]["WegeID 1"] = "";
    wegeIDVglWegepaareAnfang[zaehler]["WegeID 2"] = "";
    wegeIDVglWegepaareAnfang[zaehler]["UserID"] = "";
    wegeIDVglWegepaareAnfang[zaehler]["Kommentar"] = "";
}

var mittelwerteWegepaareAlle = new Array();
for (var m = 0; m < mittelwerteWegepaareAlle.length; m++) {
    mittelwerteWegepaareAlle[m] = new Array(6);
    mittelwerteWegepaareAlle[zaehler]["Koordinaten"] = "";
    mittelwerteWegepaareAlle[zaehler]["Koordinaten Umstieg"] = "";
    mittelwerteWegepaareAlle[zaehler]["Startzeit"] = "";
    mittelwerteWegepaareAlle[zaehler]["Umstiegszeit"] = "";
    mittelwerteWegepaareAlle[zaehler]["Wegezweck"] = "";
    mittelwerteWegepaareAlle[zaehler]["Verkehrsmittel"] = "";
}

var werteKoordinatenAlle = new Array();

var werteKoordinatenUmstiegAlle = new Array();

var werteStartzeitAlle = new Array();

var werteUmsteigszeitAlle = new Array();

var werteWegezweckAlle = new Array();
for (var n = 0; n < werteWegezweckAlle.length; n++){
    werteWegezweckAlle[n] = new Array(2);
    werteWegezweckAlle[zaehler]["Wegezweck 1"] = "";
    werteWegezweckAlle[zaehler]["Wegezweck 2"] = "";
}

var werteVerkehrsmittelAlle = new Array();
for (var o = 0; o < werteVerkehrsmittelAlle.length; o++){
    werteVerkehrsmittelAlle[o] = new Array(2);
    werteVerkehrsmittelAlle[zaehler]["Verkehrsmittel 1"] = "";
    werteVerkehrsmittelAlle[zaehler]["Verkehrsmittel 2"] = "";
}

var mittelwerteWegepaare = new Array();
for (var m = 0; m < mittelwerteWegepaare.length; m++) {
    mittelwerteWegepaare[m] = new Array(6);
    mittelwerteWegepaare[zaehler]["Koordinaten"] = "";
    mittelwerteWegepaare[zaehler]["Koordinaten Umstieg"] = "";
    mittelwerteWegepaare[zaehler]["Startzeit"] = "";
    mittelwerteWegepaare[zaehler]["Umsteigszeit"] = "";
    mittelwerteWegepaare[zaehler]["Wegezweck"] = "";
    mittelwerteWegepaare[zaehler]["Verkehrsmittel"] = "";
}

var werteKoordinaten = new Array();

var werteKoordinatenUmstieg = new Array();

var werteStartzeit = new Array();

var werteUmsteigszeit = new Array();

var werteWegezweck = new Array();
for (var n = 0; n < werteWegezweck.length; n++){
    werteWegezweck[n] = new Array(2);
    werteWegezweck[zaehler]["Wegezweck 1"] = "";
    werteWegezweck[zaehler]["Wegezweck 2"] = "";
}

var werteVerkehrsmittel = new Array();
for (var o = 0; o < werteVerkehrsmittel.length; o++){
    werteVerkehrsmittel[o] = new Array(2);
    werteVerkehrsmittel[zaehler]["Verkehrsmittel 1"] = "";
    werteVerkehrsmittel[zaehler]["Verkehrsmittel 2"] = "";
}

var wegeIDVglAusgabe = new Array();

var gewaehlteFilter = new Array();

// arrayList of PolyLine Coordinates
var listGeoJson = [{"type":"FeatureCollection", "features": []}];
var polyline;
var polylines = [];

var vergleichsRichtung = "";

var anzahlAlleGrobGefiltertenWegepaare = "";

//Ende Definition Arrays

//X Beginn Funktionen

//X Funktionen Ablauf Programm

function auswahlVglKriterien(){

    document.getElementById("box6").style.display = "block";

}
function vergleicheWege() {

    console.log("Start Vergleich");

    console.log("Bilde Wegepaare");
    wegeIDVglWegepaare = bildeWegepaare();
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    wegeIDVglWegepaareAnfang = befuelleArraywegeIDVglWegepaareAnfang(wegeIDVglWegepaare, wegeIDVglWegepaareAnfang);
    console.log("wegeIDVglWegepaareAnfang");
    console.log(wegeIDVglWegepaareAnfang);

    //Rufe Vergleichsrichtung "gleiche Richtung"/"Hin- und Rückweg" ab
    var checkboxesAuswahlVgl = document.getElementsByName("auswahlVergleich");

    for(var i = 0; i < checkboxesAuswahlVgl.length; i++)
    {
        switch (checkboxesAuswahlVgl[i].value) {
            case "gleiche Richtung":
                if(checkboxesAuswahlVgl[i].checked){
                    vergleichsRichtung = "gleiche Richtung";}
                break;
            case "Hin- und Rückweg":
                if(checkboxesAuswahlVgl[i].checked){
                    vergleichsRichtung = "Hin- und Rückweg";}
                break;
            default:
                break;
        }
    }

    console.log("vergleichsRichtung");
    console.log(vergleichsRichtung);

    //Beginn Grobvergleiche
    console.log("Grobvergleich");
    wegeIDVglWegepaare = vergleicheGrob(wegeIDVglWegepaare);
    console.log("Ende Grobvergleich");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    console.log("Bilde Mittelwerte");
    bildeMittelwerte(wegeIDVglWegepaareAnfang);
    console.log("Ende Bilde Mittelwerte");

    console.log("Ende Vergleich Grobvergleich");
    console.log("wegeIDVglWegepaareAnfang");
    console.log(wegeIDVglWegepaareAnfang);

    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    //Ende Grobvergleiche

    //Ausgabe Wegeinformationen

    console.log("Ausgabe Wegedaten Grobvergleiche");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    ausgabeGrobVgl(wegeIDVglWegepaare);

    document.getElementById("box8").style.display = "block";

} //Ende vergleicheWege()

function vergleicheGrob(wegeIDVglWegepaare){

    //Vergleich Grob

    //Vergleich NutzerID
    console.log("Vergleich NutzerID");
    wegeIDVglWegepaare = vergleicheNutzerID(wegeIDVglWegepaare);
    console.log("Ende Vergleich NutzerID");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    //Vergleich Start- und Endkoordinate
    console.log("Vergleich Start- und Endkoordinaten");
    wegeIDVglWegepaare = vergleicheStartEndKoordinaten(wegeIDVglWegepaare);
    console.log("Ende Vergleich Start- und Endkoordinaten");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    //Vergleich Gesamtdistanz
    console.log("Vergleich Gesamtdistanz");
    wegeIDVglWegepaare = vergleicheGesamtdistanz(wegeIDVglWegepaare);
    console.log("Ende Vergleich Gesamtdistanz");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    //Vergleich Gesamtdauer
    console.log("Vergleich Gesamtdauer");
    wegeIDVglWegepaare = vergleicheGesamtdauer(wegeIDVglWegepaare);
    console.log("Ende Vergleich Gesamtdauer");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    return wegeIDVglWegepaare;
}

function vergleicheWegeGenauer(){

    //alle Vergleiche mit allen Wegepaaren, die dem Grobvergleich entsprechen
    console.log("Vergleich Koordinaten");
    //wegeIDVglWegepaare = vergleicheKoordinaten(wegeIDVglWegepaare);
    wegeIDVglWegepaareFilter1 = vergleicheKoordinaten(wegeIDVglWegepaare);
    console.log("Ende Vergleich Koordinaten");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    console.log("Vergleich Koordinaten Umstieg");
    //wegeIDVglWegepaare = vergleicheKoordinatenUmstieg(wegeIDVglWegepaare);
    wegeIDVglWegepaareFilter1 = vergleicheKoordinatenUmstieg(wegeIDVglWegepaare);
    console.log("Ende Vergleich Koordinaten Umstieg");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    console.log("Vergleich Startzeit");
    //wegeIDVglWegepaare =  vergleicheStartzeit(wegeIDVglWegepaare);
    wegeIDVglWegepaareFilter1 =  vergleicheStartzeit(wegeIDVglWegepaare);
    console.log("Ende Vergleich Startzeit");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    console.log("Vergleich Umstiegszeit");
    //wegeIDVglWegepaare =  vergleicheUmstiegszeit(wegeIDVglWegepaare);
    wegeIDVglWegepaareFilter1 =  vergleicheUmstiegszeit(wegeIDVglWegepaare);
    console.log("Ende Vergleich Umstiegszeit");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    console.log("Vergleich Wegezweck");
    //wegeIDVglWegepaare =  vergleicheWegezweck(wegeIDVglWegepaare);
    wegeIDVglWegepaareFilter1 =  vergleicheWegezweck(wegeIDVglWegepaare);
    console.log("Ende Vergleich Wegezweck");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    console.log("Vergleich Verkehrsmittel");
    //wegeIDVglWegepaare = vergleicheVerkehrsmittel(wegeIDVglWegepaare);
    wegeIDVglWegepaareFilter1 = vergleicheVerkehrsmittel(wegeIDVglWegepaare);
    console.log("Ende Vergleich Verkehrsmittel");
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    console.log("Ende aller Vergleiche");

    console.log("wegeIDVglWegepaareAnfang");
    console.log(wegeIDVglWegepaareAnfang);

    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

    //Ende Vergleiche

    //Vergleiche Ergebnisarrays miteinander und suche Wege, die am Ende der Auswahl entsprechen sollen
    console.log("Wähle Wege aus");
    waehleWege(wegeIDVglWegepaare, wegeIDVglKoordinaten, wegeIDVglKoordinatenUmstieg, wegeIDVglStartzeit, wegeIDVglDauerUmstieg, wegeIDVglWegezweck, wegeIDVglVerkehrsmittel);

    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);

}

function wendeVergleicheAn() {

    wegeIDVglWegepaareFilter = sammlePassendeWegepaare();

    //Ausgabe auf Karte und Ausgabe Wegeinformationen
    console.log("Anzeige und Ausgabe Wegedaten");
    console.log("wegeIDVglWegepaareFilter");
    console.log(wegeIDVglWegepaareFilter);

    ausgabeWegVgl(wegeIDVglWegepaareFilter);

}

//Ende Funktionen Ablauf Programm

//X Initial Funktionen
function bildeWegepaare() {

    //speichere nur ein Wegepaar mit den gleichen beiden Wegen
    var zaehler = 0;
    wegeIDVglEinfach[zaehler] = new Array();
    wegeIDVglEinfach[zaehler]["WegeID 1"] = "";
    wegeIDVglEinfach[zaehler]["WegeID 2"] = "";
    wegeIDVglEinfach[zaehler]["UserID"] = "";

    wegedaten.forEach(function(element){
        var ID = element["WegeID"];
        var userID1 = element["UserID"];
        console.log("ID");
        console.log(ID);
        for (var l = 0; l < wegedaten.length; l++){

            //console.log(wegeIDVgl[l]);
            //console.log(wegeIDVgl[zaehlVgl]);
            if(ID != wegedaten[l]["WegeID"] ) {
                var wegeID1 = ID;
                var wegeID2 = wegedaten[l]["WegeID"];
                var userID2 = wegedaten[l]["UserID"];
                var gleich = false;
                wegeIDVglEinfach.forEach(function(element1){
                    var wegeID1E = element1["WegeID 1"];
                    var wegeID2E = element1["WegeID 2"];

                    if(wegeID1 == wegeID1E && wegeID2 == wegeID2E || wegeID2 == wegeID1E && wegeID1 == wegeID2E){
                        gleich = true;
                    }

                });

                if(gleich == false){

                    if(userID1 == userID2){

                        if(userID1 == "" && userID2 == ""){
                            console.log("UserID nicht vorhanden");
                            wegeIDVglEinfach[zaehler] = new Array();
                            wegeIDVglEinfach[zaehler]["WegeID 1"] = wegeID1;
                            wegeIDVglEinfach[zaehler]["WegeID 2"] = wegeID2;
                            wegeIDVglEinfach[zaehler]["UserID"] = "UserID nicht vorhanden";

                            zaehler = zaehler + 1;

                        } else {
                            console.log("Wegepaar mit gleicher UserID");
                            wegeIDVglEinfach[zaehler] = new Array();
                            wegeIDVglEinfach[zaehler]["WegeID 1"] = wegeID1;
                            wegeIDVglEinfach[zaehler]["WegeID 2"] = wegeID2;
                            wegeIDVglEinfach[zaehler]["UserID"] = "Wegepaar mit gleicher UserID";

                            zaehler = zaehler + 1;

                        }

                    } else {

                        if(userID1 == undefined){
                            console.log("UserID nicht vorhanden");
                            wegeIDVglEinfach[zaehler] = new Array();
                            wegeIDVglEinfach[zaehler]["WegeID 1"] = wegeID1;
                            wegeIDVglEinfach[zaehler]["WegeID 2"] = wegeID2;
                            wegeIDVglEinfach[zaehler]["UserID"] = "UserID nicht vorhanden";

                            zaehler = zaehler + 1;

                        } else {
                            console.log("UserID stimmt nicht überein");
                            wegeIDVglEinfach[zaehler] = new Array();
                            wegeIDVglEinfach[zaehler]["WegeID 1"] = wegeID1;
                            wegeIDVglEinfach[zaehler]["WegeID 2"] = wegeID2;
                            wegeIDVglEinfach[zaehler]["UserID"] = "UserID stimmt nicht überein";

                            zaehler = zaehler + 1;
                        }

                    }

                }

            }

        }
    });

    console.log("wegeIDVglEinfach");
    console.log(wegeIDVglEinfach);

    return wegeIDVglEinfach;

}  //Ende bildeWegepaare()

function befuelleArraywegeIDVglWegepaareAnfang(wegeIDVglWegepaare, wegeIDVglWegepaareAnfang) {

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var wegeID2 = element["WegeID 2"];
        var userID = element["UserID"];

        wegeIDVglWegepaareAnfang.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": "Start"});

    });

    return wegeIDVglWegepaareAnfang;
}
//Ende Initial Funktionen

//X MIttelwertfuntion

function bildeMittelwerte(wegeIDVglWegepaareAnfang) {

    wegeIDVglWegepaareAnfang.forEach(function(element){
        var wegeID1 = element["WegeID 1"];
        var wegeID2 = element["WegeID 2"];
        var userID = element["UserID"];

        console.log("wegeID1");
        console.log(wegeID1);
        console.log("wegeID2");
        console.log(wegeID2);


        //Mittelwert Koordinaten
        console.log("Mittelwert Koordinaten");
        var weg1Zaehler = "";
        var weg2Zaehler = "";

        for (var z = 0; z < wegedatenKoordinaten.length; z++){
            if (wegeID1 == wegedatenKoordinaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedatenKoordinaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        console.log("wegedatenKoordinaten[weg1Zaehler]");
        console.log(wegedatenKoordinaten[weg1Zaehler]);
        console.log("wegedatenKoordinaten[weg1Zaehler].length");
        console.log(wegedatenKoordinaten[weg1Zaehler].length);
        console.log("wegedatenKoordinaten[weg2Zaehler]");
        console.log(wegedatenKoordinaten[weg2Zaehler]);
        console.log("wegedatenKoordinaten[weg2Zaehler].length");
        console.log(wegedatenKoordinaten[weg2Zaehler].length);

        if(wegedatenKoordinaten[weg1Zaehler].length == wegedatenKoordinaten[weg2Zaehler].length){

            if(vergleichsRichtung == "gleiche Richtung"){

                for( var k = 0; k < wegedatenKoordinaten[weg1Zaehler].length; k = k + 2){
                    console.log(k);
                    console.log("wegedatenKoordinaten[weg1Zaehler][k]");
                    console.log(wegedatenKoordinaten[weg1Zaehler][k]);
                    console.log("wegedatenKoordinaten[weg1Zaehler][k+1]");
                    console.log(wegedatenKoordinaten[weg1Zaehler][k+1]);
                    console.log("wegedatenKoordinaten[weg2Zaehler][k]");
                    console.log(wegedatenKoordinaten[weg2Zaehler][k]);
                    console.log("wegedatenKoordinaten[weg2Zaehler][k+1]");
                    console.log(wegedatenKoordinaten[weg2Zaehler][k+1]);

                    console.log(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1]);
                    var distanz = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1]);

                    werteKoordinatenAlle.push(distanz);

                }

            } else {

                if(vergleichsRichtung == "Hin- und Rückweg"){

                    var l = wegedatenKoordinaten[weg1Zaehler].length-2;
                    for( var k = 0; k < wegedatenKoordinaten[weg1Zaehler].length; k = k + 2){
                        console.log("k");
                        console.log(k);
                        console.log("l");
                        console.log(l);
                        console.log("wegedatenKoordinaten[weg1Zaehler][k]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][k]);
                        console.log("wegedatenKoordinaten[weg1Zaehler][k+1]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][k+1]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][l]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][l]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][l+1]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][l+1]);

                        console.log(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1]);
                        var distanz = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1]);

                        werteKoordinatenAlle.push(distanz);
                        l = l - 2;

                    }

                }

            }

        } else {
            console.log("Koordinatenanzahl stimmt nicht überein");
        }

        //Mittelwert Koordinaten Umstieg
        console.log("Koordinaten Umstieg");
        console.log("wegedatenKoordinaten[weg1Zaehler]");
        console.log(wegedatenKoordinaten[weg1Zaehler]);
        console.log("wegedatenKoordinaten[weg1Zaehler].length");
        console.log(wegedatenKoordinaten[weg1Zaehler].length);
        console.log(wegedatenKoordinaten[weg2Zaehler]);
        console.log("wegedatenKoordinaten[weg2Zaehler]");
        console.log("wegedatenKoordinaten[weg2Zaehler].length");
        console.log(wegedatenKoordinaten[weg2Zaehler].length);

        if(wegedatenKoordinaten[weg1Zaehler].length == wegedatenKoordinaten[weg2Zaehler].length){

            if(wegedatenVerkehrsmittel[weg1Zaehler].length == 1){
                werteKoordinatenUmstiegAlle.push(0);
                console.log("Keine Umstiegskoordinaten");
            } else {

                if(vergleichsRichtung == "gleiche Richtung"){

                    for( var l = 2; l < wegedatenKoordinaten[weg1Zaehler].length-2; l = l + 4){
                        console.log(l);
                        console.log("wegedatenKoordinaten[weg1Zaehler][l]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][l]);
                        console.log("wegedatenKoordinaten[weg1Zaehler][l+1]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][l+1]);
                        console.log("wegedatenKoordinaten[weg1Zaehler][l+2]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][l+2]);
                        console.log("wegedatenKoordinaten[weg1Zaehler][l+3]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][l+3]);

                        console.log("wegedatenKoordinaten[weg2Zaehler][l]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][l]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][l+1]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][l+1]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][l+2]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][l+2]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][l+3]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][l+3]);

                        //Vergleich Distanz weg1Zaehler][l]/weg1Zaehler][l+1] und weg1Zaehler][l+2]/weg1Zaehler][l+3]
                        console.log(wegedatenKoordinaten[weg1Zaehler][l], wegedatenKoordinaten[weg1Zaehler][l+1], wegedatenKoordinaten[weg1Zaehler][l+2], wegedatenKoordinaten[weg1Zaehler][l+3]);
                        var distanzweg1Zaehler = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][l], wegedatenKoordinaten[weg1Zaehler][l+1], wegedatenKoordinaten[weg1Zaehler][l+2], wegedatenKoordinaten[weg1Zaehler][l+3]);

                        //Vergleich Distanz weg2Zaehler][l]/weg2Zaehler][l+1] und weg2Zaehler][l+2]/weg2Zaehler][l+3]
                        console.log(wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1], wegedatenKoordinaten[weg2Zaehler][l+2], wegedatenKoordinaten[weg2Zaehler][l+3]);
                        var distanzweg2Zaehler = vergleichsFunktion(wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1], wegedatenKoordinaten[weg2Zaehler][l+2], wegedatenKoordinaten[weg2Zaehler][l+3]);

                        var distanz = "";
                        if(distanzweg1Zaehler > distanzweg2Zaehler){
                            distanz = distanzweg1Zaehler - distanzweg2Zaehler;

                        } else {
                            distanz = distanzweg2Zaehler - distanzweg1Zaehler;
                        }

                        console.log("distanz");
                        console.log(distanz);
                        werteKoordinatenUmstiegAlle.push(distanz);

                    }

                } else {

                    if(vergleichsRichtung == "Hin- und Rückweg"){

                        var m = wegedatenKoordinaten[weg1Zaehler].length-2;
                        for( var l = 2; l < wegedatenKoordinaten[weg1Zaehler].length-2; l = l + 4){
                            console.log("l");
                            console.log(l);
                            console.log("m");
                            console.log(m);
                            console.log("wegedatenKoordinaten[weg1Zaehler][l]");
                            console.log(wegedatenKoordinaten[weg1Zaehler][l]);
                            console.log("wegedatenKoordinaten[weg1Zaehler][l+1]");
                            console.log(wegedatenKoordinaten[weg1Zaehler][l+1]);
                            console.log("wegedatenKoordinaten[weg1Zaehler][l+2]");
                            console.log(wegedatenKoordinaten[weg1Zaehler][l+2]);
                            console.log("wegedatenKoordinaten[weg1Zaehler][l+3]");
                            console.log(wegedatenKoordinaten[weg1Zaehler][l+3]);

                            console.log("wegedatenKoordinaten[weg2Zaehler][m]");
                            console.log(wegedatenKoordinaten[weg2Zaehler][m]);
                            console.log("wegedatenKoordinaten[weg2Zaehler][m+1]");
                            console.log(wegedatenKoordinaten[weg2Zaehler][m+1]);
                            console.log("wegedatenKoordinaten[weg2Zaehler][m-2]");
                            console.log(wegedatenKoordinaten[weg2Zaehler][m-2]);
                            console.log("wegedatenKoordinaten[weg2Zaehler][m-1]");
                            console.log(wegedatenKoordinaten[weg2Zaehler][m-1]);

                            //Vergleich Distanz weg1Zaehler][l]/weg1Zaehler][l+1] und weg1Zaehler][l+2]/weg1Zaehler][l+3]
                            console.log(wegedatenKoordinaten[weg1Zaehler][l], wegedatenKoordinaten[weg1Zaehler][l+1], wegedatenKoordinaten[weg1Zaehler][l+2], wegedatenKoordinaten[weg1Zaehler][l+3]);
                            var distanzweg1Zaehler = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][l], wegedatenKoordinaten[weg1Zaehler][l+1], wegedatenKoordinaten[weg1Zaehler][l+2], wegedatenKoordinaten[weg1Zaehler][l+3]);

                            //Vergleich Distanz weg2Zaehler][m]/weg2Zaehler][m+1] und weg2Zaehler][m-2]/weg2Zaehler][m+3]
                            console.log(wegedatenKoordinaten[weg2Zaehler][m], wegedatenKoordinaten[weg2Zaehler][m+1], wegedatenKoordinaten[weg2Zaehler][m-2], wegedatenKoordinaten[weg2Zaehler][m-1]);
                            var distanzweg2Zaehler = vergleichsFunktion(wegedatenKoordinaten[weg2Zaehler][m], wegedatenKoordinaten[weg2Zaehler][m+1], wegedatenKoordinaten[weg2Zaehler][m-2], wegedatenKoordinaten[weg2Zaehler][m-1]);

                            var distanz = "";
                            if(distanzweg1Zaehler > distanzweg2Zaehler){
                                distanz = distanzweg1Zaehler - distanzweg2Zaehler;

                            } else {
                                distanz = distanzweg2Zaehler - distanzweg1Zaehler;
                            }

                            console.log("distanz");
                            console.log(distanz);
                            werteKoordinatenUmstiegAlle.push(distanz);
                            m = m - 4;

                        }

                    }

                }



            }

        } else {
            console.log("Koordinatenanzahl Umstieg stimmt nicht überein");
        }

        //Mittelwert Startzeit
        console.log("Mittelwert Startzeit");
        var dateStart = new Date(Date.now());
        console.log("dateStart");
        console.log(dateStart);

        //Startzeit Weg1 als date anlegen
        var startzeit1 = wegedaten[weg1Zaehler]["Startzeit"];
        //console.log(weg1Zaehler);
        //console.log(startzeit1);

        var zeit1 = startzeit1.substr(11);
        //console.log(zeit1);
        var stunden1 = zeit1.substr(0,2);
        var minuten1 = zeit1.substr(3,2);
        var sekunden1 = zeit1.substr(6,2);
        //console.log(startzeit1);
        var tag1 = startzeit1.substr(0,2);
        var monat1 = startzeit1.substr(3,2)-1;
        var jahr1 = startzeit1.substr(6,4);
        //console.log(tag1, monat1, jahr1);
        var date1 = new Date(jahr1, monat1, tag1, stunden1, minuten1, sekunden1);
        console.log("date1");
        console.log(date1);

        //Startzeit Weg2 als date anlegen
        var startzeit2 = wegedaten[weg2Zaehler]["Startzeit"];
        //console.log(weg2Zaehler);
        //console.log(startzeit2);

        var zeit2 = startzeit2.substr(11);
        //console.log(zeit2);
        var stunden2 = zeit2.substr(0,2);
        var minuten2 = zeit2.substr(3,2);
        var sekunden2 = zeit2.substr(6,2);
        //console.log(startzeit2);
        var tag2 = startzeit2.substr(0,2);
        var monat2 = startzeit2.substr(3,2)-1;
        var jahr2 = startzeit2.substr(6,4);
        //console.log(tag2, monat2, jahr2);
        var date2 = new Date(jahr2, monat2, tag2, stunden2, minuten2, sekunden2);
        console.log("date2");
        console.log(date2);
        //date3: date2 mit gleichem Datum wie date1, damit Startzeit überprüft werden kann
        var date3 = new Date(jahr1, monat1, tag1, stunden2, minuten2, sekunden2);
        console.log("date3");
        console.log(date3);

        var zeitdifferenz ="";
        if(date1 < date3){
            zeitdifferenz = vergleichsFunktionZeit(date1, date3);
        } else {
            zeitdifferenz = vergleichsFunktionZeit(date3, date1);
        }

        console.log("zeitdifferenz");
        console.log(zeitdifferenz);

        var zeitdiffDate = millisekundenInDateWandeln(zeitdifferenz, dateStart);
        console.log("zeitdiff");
        console.log(zeitdiffDate);

        werteStartzeitAlle.push(zeitdiffDate);

        //Mittelwert Umstiegszeit
        console.log("Mittelwert Umstiegszeit");
        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler]);
        console.log("wegedatenAbfahrtAnkunft[weg1Zaehler]");
        console.log("wegedatenAbfahrtAnkunft[weg2Zaehler]");
        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler]);

        if(wegedatenAbfahrtAnkunft[weg1Zaehler].length == wegedatenAbfahrtAnkunft[weg2Zaehler].length){

            if(wegedatenVerkehrsmittel[weg1Zaehler].length == 1){
                var y = dateStart.getUTCFullYear();
                var m = dateStart.getUTCMonth();
                var d = dateStart.getDate();
                var dateNull = new Date(y,m, d, 0, 0, 0);
                console.log("keine Umstiegszeit");
                console.log(dateNull);
                werteUmsteigszeitAlle.push(dateNull);
            } else {

                if(vergleichsRichtung == "gleiche Richtung"){

                    for( var m = 0; m < wegedatenAbfahrtAnkunft[weg1Zaehler].length-2; m = m + 2){
                        console.log(m);
                        console.log("wegedatenAbfahrtAnkunft[weg1Zaehler][m+1]");
                        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][m+1]);
                        console.log("wegedatenAbfahrtAnkunft[weg1Zaehler][m+2]");
                        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][m+2]);

                        console.log("wegedatenAbfahrtAnkunft[weg2Zaehler][m+1]");
                        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][m+1]);
                        console.log("wegedatenAbfahrtAnkunft[weg2Zaehler][m+2]");
                        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][m+2]);

                        //Vergleich Umstiegszeit weg1Zaehler][m+1] und weg1Zaehler][m+2]
                        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][m+1], wegedatenAbfahrtAnkunft[weg1Zaehler][m+2]);
                        var umstiegszeitweg1Zaehler = vergleichsFunktionZeit(wegedatenAbfahrtAnkunft[weg1Zaehler][m+1], wegedatenAbfahrtAnkunft[weg1Zaehler][m+2]);
                        console.log("umstiegszeitweg1Zaehler");
                        console.log(umstiegszeitweg1Zaehler);

                        //Vergleich Umstiegszeit weg2Zaehler][m] und weg2Zaehler][m+1]
                        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][m+1], wegedatenAbfahrtAnkunft[weg2Zaehler][m+2]);
                        var umstiegszeitweg2Zaehler = vergleichsFunktionZeit(wegedatenAbfahrtAnkunft[weg2Zaehler][m+1], wegedatenAbfahrtAnkunft[weg2Zaehler][m+2]);
                        console.log("umstiegszeitweg2Zaehler");
                        console.log(umstiegszeitweg2Zaehler);

                        var zeitdifferenz = "";
                        if(umstiegszeitweg1Zaehler > umstiegszeitweg2Zaehler){
                            zeitdifferenz = umstiegszeitweg1Zaehler - umstiegszeitweg2Zaehler;
                        } else {
                            zeitdifferenz = umstiegszeitweg2Zaehler - umstiegszeitweg1Zaehler;
                        }

                        console.log("zeitdifferenz");
                        console.log(zeitdifferenz);

                        var zeitdiffDate = millisekundenInDateWandeln(zeitdifferenz, dateStart);
                        console.log("zeitdiff");
                        console.log(zeitdiffDate);

                        werteUmsteigszeitAlle.push(zeitdiffDate);

                    }

                } else {

                    if(vergleichsRichtung == "Hin- und Rückweg"){

                        var n = wegedatenAbfahrtAnkunft[weg1Zaehler].length-2;
                        for( var m = 0; m < wegedatenAbfahrtAnkunft[weg1Zaehler].length-2; m = m + 2){
                            console.log("m");
                            console.log(m);
                            console.log("n");
                            console.log(n);
                            console.log("wegedatenAbfahrtAnkunft[weg1Zaehler][m+1]");
                            console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][m+1]);
                            console.log("wegedatenAbfahrtAnkunft[weg1Zaehler][m+2]");
                            console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][m+2]);

                            console.log("wegedatenAbfahrtAnkunft[weg2Zaehler][n-1]");
                            console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][n-1]);
                            console.log("wegedatenAbfahrtAnkunft[weg2Zaehler][n]");
                            console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][n]);

                            //Vergleich Umstiegszeit weg1Zaehler][m+1] und weg1Zaehler][m+2]
                            console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][m+1], wegedatenAbfahrtAnkunft[weg1Zaehler][m+2]);
                            var umstiegszeitweg1Zaehler = vergleichsFunktionZeit(wegedatenAbfahrtAnkunft[weg1Zaehler][m+1], wegedatenAbfahrtAnkunft[weg1Zaehler][m+2]);
                            console.log("umstiegszeitweg1Zaehler");
                            console.log(umstiegszeitweg1Zaehler);

                            //Vergleich Umstiegszeit weg2Zaehler][n-1] und weg2Zaehler][n]
                            console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][n-1], wegedatenAbfahrtAnkunft[weg2Zaehler][n]);
                            var umstiegszeitweg2Zaehler = vergleichsFunktionZeit(wegedatenAbfahrtAnkunft[weg2Zaehler][n-1], wegedatenAbfahrtAnkunft[weg2Zaehler][n]);
                            console.log("umstiegszeitweg2Zaehler");
                            console.log(umstiegszeitweg2Zaehler);

                            var zeitdifferenz = "";
                            if(umstiegszeitweg1Zaehler > umstiegszeitweg2Zaehler){
                                zeitdifferenz = umstiegszeitweg1Zaehler - umstiegszeitweg2Zaehler;
                            } else {
                                zeitdifferenz = umstiegszeitweg2Zaehler - umstiegszeitweg1Zaehler;
                            }

                            console.log("zeitdifferenz");
                            console.log(zeitdifferenz);

                            var zeitdiffDate = millisekundenInDateWandeln(zeitdifferenz, dateStart);
                            console.log("zeitdiff");
                            console.log(zeitdiffDate);

                            werteUmsteigszeitAlle.push(zeitdiffDate);
                            n = n - 2;

                        }

                    }

                }

            }

        } else {
            console.log("Anzahl Zeitwerte Umstieg stimmt nicht überein");
        }

        //Mittelwert Wegezweck
        console.log("Mittelwert Wegezweck");
        var wegeZweck1= wegedaten[weg1Zaehler]["Wegezweck"];

        //console.log(weg1Zaehler);
        console.log("wegeZweck1");
        console.log(wegeZweck1);

        var wegeZweck2= wegedaten[weg2Zaehler]["Wegezweck"];

        //console.log(weg2Zaehler);
        console.log("wegeZweck2");
        console.log(wegeZweck2);

        werteWegezweckAlle.push({"Wegezweck 1": wegeZweck1, "Wegezweck 2": wegeZweck2});

        //Mittelwert Verkehrsmittel
        console.log("Mittelwert Verkehrsmittel");
        var zaehlerwegedatenVM1 = "";
        var zaehlerwegedatenVM2 = "";
        for (var z = 0; z < wegedatenVerkehrsmittel.length; z++){
            if (wegeID1 == wegedatenVerkehrsmittel[z]["WegeID"]){
                zaehlerwegedatenVM1 = z;
            }
            if (wegeID2 == wegedatenVerkehrsmittel[z]["WegeID"]){
                zaehlerwegedatenVM2 = z;
            }

        }

        console.log("zaehlerwegedatenVM1");
        console.log(zaehlerwegedatenVM1);
        console.log("zaehlerwegedatenVM2");
        console.log(zaehlerwegedatenVM2);

        var vmListe1 = "";
        var vmListe2 = "";

        if(wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length == wegedatenVerkehrsmittel[zaehlerwegedatenVM2].length){

            if(vergleichsRichtung == "gleiche Richtung"){

                for (var w = 0; w < wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length; w++){
                    console.log("w");
                    console.log(w);
                    console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]");
                    console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]);
                    console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM2][w]");
                    console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM2][w]);

                    vmListe1 = vmListe1 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w];
                    vmListe2 = vmListe2 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM2][w];

                }

            } else {

                if(vergleichsRichtung == "Hin- und Rückweg") {

                    var v = wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length-1;
                    for (var w = 0; w < wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length; w++) {
                        console.log("w");
                        console.log(w);
                        console.log("v");
                        console.log(v);
                        console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]");
                        console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]);
                        console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v]");
                        console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v]);

                        vmListe1 = vmListe1 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w];
                        vmListe2 = vmListe2 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v];
                        v = v - 1;

                    }

                }

            }

        } else {
            console.log("Verkehrsmittelanzahl stimmt nicht überein");

            vmListe1 = "Verkehrsmittelanzahl stimmt nicht überein";
            vmListe2 = "Verkehrsmittelanzahl stimmt nicht überein";

             /*
            for (var w = 0; w < wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length; w++){
                console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]");
                console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]);

                vmListe1 = vmListe1 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w];

            }

            for (var v = 0; v < wegedatenVerkehrsmittel[zaehlerwegedatenVM2].length; v++){

                console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v]");
                console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v]);

                vmListe2 = vmListe2 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v];

            }

            console.log("vmListe1");
            console.log(vmListe1);
            console.log("vmListe2");
            console.log(vmListe2);

              */

        }

        werteVerkehrsmittelAlle.push({"Verkehrsmittel 1": vmListe1, "Verkehrsmittel 2": vmListe2});

    });

    console.log("Bilde Mittelwerte Berechnung");
    var mittelwertKoordinatenAlle = bildeMittelwertZahl(werteKoordinatenAlle);

    console.log("mittelwertKoordinatenAlle");
    console.log(mittelwertKoordinatenAlle);

    mittelwerteWegepaareAlle.push({"Koordinaten": mittelwertKoordinatenAlle});

    console.log("werteKoordinatenAlle");
    console.log(werteKoordinatenAlle);

    var mittelwertKoordinatenUmstiegAlle = bildeMittelwertZahl(werteKoordinatenUmstiegAlle);
    console.log("mittelwertKoordinatenUmstiegAlle");
    console.log(mittelwertKoordinatenUmstiegAlle);

    mittelwerteWegepaareAlle.push({"Koordinaten Umstieg": mittelwertKoordinatenUmstiegAlle});

    console.log("werteKoordinatenUmstiegAlle");
    console.log(werteKoordinatenUmstiegAlle);

    var mittelwertStartzeitAlle = bildeMittelwertDate(werteStartzeitAlle);

    var stuSt = mittelwertStartzeitAlle.getHours();
    var minSt = mittelwertStartzeitAlle.getMinutes();
    var secSt = mittelwertStartzeitAlle.getSeconds();

    var mittelwertStartzeitAlleText = stuSt + ":" + minSt + ":" + secSt;

    mittelwerteWegepaareAlle.push({"Startzeit": mittelwertStartzeitAlleText});

    console.log("werteStartzeitAlle");
    console.log(werteStartzeitAlle);

    var mittelwertUmstiegszeitAlle = bildeMittelwertDate(werteUmsteigszeitAlle);

    var stuUm = mittelwertUmstiegszeitAlle.getHours();
    var minUm = mittelwertUmstiegszeitAlle.getMinutes();
    var secUm = mittelwertUmstiegszeitAlle.getSeconds();

    var mittelwertUmstiegszeitAlleText = stuUm + ":" + minUm + ":" + secUm;

    mittelwerteWegepaareAlle.push({"Umstiegszeit": mittelwertUmstiegszeitAlleText});

    console.log("werteUmstiegszeitAlle");
    console.log(werteUmsteigszeitAlle);

    var mittelwertWegezweckAlle = bildeMittelwertWegezweck(werteWegezweckAlle);

    var mittelwertWegezweckAlleText = "";
    mittelwertWegezweckAlle.forEach(function(element){
        var text = "Wegezweck 1:" + " " + element["Wegezweck 1"] + " " +"|"+ " " + "Wegezweck 2:" + " " + element["Wegezweck 2"] + " " + "||"+ " " + "Anzahl:" + " " + element["Anzahl"];
        mittelwertWegezweckAlleText = mittelwertWegezweckAlleText + text;
    });

    mittelwerteWegepaareAlle.push({"Wegezweck": mittelwertWegezweckAlleText});

    console.log("werteWegezweckAlle");
    console.log(werteWegezweckAlle);

    var mittelwertVerkehrsmittelAlle = bildeMittelwertVerkehrsmittel(werteVerkehrsmittelAlle);

    var mittelwertVerkehrsmittelAlleText = "";
    mittelwertVerkehrsmittelAlle.forEach(function(element){
        var text = "Verkehrsmittel 1:" + " " + element["Verkehrsmittel 1"] + " " +"|"+ " " + "Verkehrsmittel 2:" + " " + element["Verkehrsmittel 2"] + " " +"||"+ " " + "Anzahl:" + " " + element["Anzahl"];
        mittelwertVerkehrsmittelAlleText = mittelwertVerkehrsmittelAlleText + text;
    });

    mittelwerteWegepaareAlle.push({"Verkehrsmittel": mittelwertVerkehrsmittelAlleText});

    console.log("werteVerkehrsmittelAlle");
    console.log(werteVerkehrsmittelAlle);

    console.log("mittelwerteWegepaareAlle");
    console.log(mittelwerteWegepaareAlle);

}//Ende bildeMittelwert()

function bildeMittelwertZahl(array) {

    var anzahl = 0;
    var werte = 0;

    array.forEach(function(element){
        werte = werte + element;
        anzahl = anzahl + 1;

    });

    var rueckgabe = werte/anzahl;

    return rueckgabe;
}

function bildeMittelwertDate(array) {

    var rueckgabe = new Date();
    var anzahl = 0;
    var werte = new Date();
    werte.setHours(0,0,0);

    array.forEach(function(element){

        console.log("Sammelvariable Zeit");
        console.log(werte);
        var stuS = werte.getHours();
        var minS = werte.getMinutes();
        var secS = werte.getSeconds();
        var tagS = werte.getDate();

        console.log("neues Datum");
        console.log(element);
        var stu = element.getHours();
        var min = element.getMinutes();
        var sec = element.getSeconds();

        var secNeu = 0;
        var minNeu = 0;
        var stuNeu = 0;

        var secNeuUe = 0;
        var minNeuUe = 0;
        var stuNeuUe = 0;

        var secUebertrag = 0;
        var minUebertrag = 0;
        var stuUebertrag = 0;

        secNeu = secS + sec;
        console.log("secNeu");
        console.log(secNeu);

        if(secNeu > 59){
            if (secNeu == 60){
                secNeu = 0;
                minNeuUe = 1;
            }
            secUebertrag = secNeu - 60;
            secNeu = 0;
            minNeuUe = 1;
            secNeu = secNeu + secUebertrag;
        }

        minNeu = minS + minNeuUe + min;
        console.log("minNeu");
        console.log(minNeu);

        if(minNeu > 59){
            if (minNeu == 60){
                minNeu = 0;
                stuNeuUe = 1;
            }
            minUebertrag = minNeu - 60;
            minNeu = 0;
            stuNeuUe = 1;
            minNeu = minNeu + minUebertrag;
        }

        stuNeu = stuS + stuNeuUe + stu;
        console.log("stuNeu");
        console.log(stuNeu);

        var taguebergang = false;

        if(stuNeu > 24){
            taguebergang = true;
            tagS = tagS + 1;
        }

        if(taguebergang == true){
            werte.setDate(tagS);
            console.log(tagS, stuNeu, minNeu, secNeu);
            werte.setHours(stuNeu, minNeu, secNeu);

        } else {
            console.log(tagS, stuNeu, minNeu, secNeu);
            werte.setHours(stuNeu, minNeu, secNeu);
        }

        console.log("werte");
        console.log(werte);

        anzahl = anzahl + 1;

    });

    console.log("werte");
    console.log(werte);

    var werteMS = werte.getTime();
    console.log("werteMS");
    console.log(werteMS);

    console.log("anzahl");
    console.log(anzahl);

    var stuD = werte.getHours();
    var minD = werte.getMinutes();
    var secD = werte.getSeconds();

   var secDAlle = stuD*60*60 + minD*60 + secD;
    console.log("secDAlle");
    console.log(secDAlle);

    var rueckgabeS = secDAlle/anzahl;

    function fuehrendeNullSec(wert) {
        if (wert < 10) return "0" + parseInt(wert);
        else return parseInt(wert);
    }

    var stuR = fuehrendeNullSec((rueckgabeS/60/60)%24);
    var minR = fuehrendeNullSec((rueckgabeS/60)%60);
    var secR = fuehrendeNullSec(rueckgabeS%60);

    rueckgabe.setHours(stuR, minR, secR);

    console.log("rueckgabe");
    console.log(rueckgabe);

    return rueckgabe;
}

function bildeMittelwertWegezweck(werteWegezweck) {

    var rueckgabeZweck = new Array();
    for (var n = 0; n < rueckgabeZweck.length; n++){
        rueckgabeZweck[n] = new Array(2);
        rueckgabeZweck[zaehler]["Wegezweck 1"] = "";
        rueckgabeZweck[zaehler]["Wegezweck 2"] = "";
        rueckgabeZweck[zaehler]["Anzahl"] = 0;
    }

    werteWegezweck.forEach(function(element){
        var wegezweck1 = element["Wegezweck 1"];
        var wegezweck2 = element["Wegezweck 2"];
        console.log("wegezweck1");
        console.log(wegezweck1);
        console.log("wegezweck2");
        console.log(wegezweck2);
        var gleich = false;
        var indexW = "";

        rueckgabeZweck.forEach(function(element1,index){

            if(wegezweck1 == element1["Wegezweck 1"] && wegezweck2 == element1["Wegezweck 2"]){
                gleich = true;
                indexW = index;

            }

        });

        if(gleich == true){

            console.log("Wege Anzahl erhöhen");
            var anzahlneu = rueckgabeZweck[indexW]["Anzahl"] + 1;
            console.log("anzahlneu");
            console.log(anzahlneu);
            rueckgabeZweck.splice(indexW,1,{"Wegezweck 1": wegezweck1, "Wegezweck 2": wegezweck2, "Anzahl": anzahlneu});

        } else {
            console.log("Wege neu hinzufügen");
            rueckgabeZweck.push({"Wegezweck 1": wegezweck1, "Wegezweck 2": wegezweck2, "Anzahl": 1});
        }

    });

    console.log("rueckgabeZweck");
    console.log(rueckgabeZweck);

    return rueckgabeZweck;
}

function bildeMittelwertVerkehrsmittel(werteVerkehrsmittel) {

    var rueckgabeVM = new Array();
    for (var n = 0; n < rueckgabeVM.length; n++){
        rueckgabeVM[n] = new Array(2);
        rueckgabeVM[zaehler]["Verkehrsmittel 1"] = "";
        rueckgabeVM[zaehler]["Verkehrsmittel 2"] = "";
        rueckgabeVM[zaehler]["Anzahl"] = 0;
    }

    console.log("werteVerkehrsmittelAlle");
    console.log(werteVerkehrsmittelAlle);
    console.log("werteVerkehrsmittel");
    console.log(werteVerkehrsmittel);

    werteVerkehrsmittel.forEach(function(element){
        var verkehrsmittel1 = element["Verkehrsmittel 1"];
        var verkehrsmittel2 = element["Verkehrsmittel 2"];
        console.log("verkehrsmittel1");
        console.log(verkehrsmittel1);
        console.log("verkehrsmittel2");
        console.log(verkehrsmittel2);
        var gleich = false;
        var indexW = "";

        rueckgabeVM.forEach(function(element1,index){

            if(verkehrsmittel1 == element1["Verkehrsmittel 1"] && verkehrsmittel2 == element1["Verkehrsmittel 2"]){
                gleich = true;
                indexW = index;

            }

        });

        if(gleich == true) {
            console.log("Wege Anzahl erhöhen");
            var anzahlneu = rueckgabeVM[indexW]["Anzahl"] + 1;
            console.log("anzahlneu");
            console.log(anzahlneu);
            rueckgabeVM.splice(indexW,1,{"Verkehrsmittel 1": verkehrsmittel1, "Verkehrsmittel 2": verkehrsmittel2, "Anzahl": anzahlneu});
        } else {
            console.log("Wege neu hinzufügen");
            rueckgabeVM.push({"Verkehrsmittel 1": verkehrsmittel1, "Verkehrsmittel 2": verkehrsmittel2, "Anzahl": 1});
        }

    });

    console.log("rueckgabeVM");
    console.log(rueckgabeVM);

    return rueckgabeVM;
}
//Ende Mittelwertfunktion

//X Vergleichsfunktionen

function vergleicheNutzerID(wegeIDVglWegepaare){

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        console.log("wegeID1");
        console.log(wegeID1);
        console.log("wegeID2");
        console.log(wegeID2);
        console.log("userID");
        console.log(userID);

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);

        var gleicheNutzerID = document.getElementsByName("gleicheNutzerID");
        var gleicheNutzerIDValue = "";
        for(var i = 0; i < gleicheNutzerID.length; i++)
        {
            switch (gleicheNutzerID[i].value) {
                case "ja":
                    if(gleicheNutzerID[i].checked){
                        gleicheNutzerIDValue = "ja"}
                    break;
                case "nein":
                    if(gleicheNutzerID[i].checked){
                        gleicheNutzerIDValue = "nein"}
                    break;
                default:
                    break;
            }
        }

        console.log("gleicheNutzerIDValue");
        console.log(gleicheNutzerIDValue);

        if(gleicheNutzerIDValue == "ja"){

            //ja gewählt, nur gleiche UnserID
            if(userID == "Wegepaar mit gleicher UserID"){
                wegeIDVglNutzerID.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
                wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1, {"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", UserID stimmt überein"});
                console.log("UserID stimmt überein");
            }else{
                console.log("UserID stimmt nicht überein");
                wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", UserID stimmt nicht überein"});
            }

        } else {
            //nein gewählt, userID muss nicht gleich sein
            wegeIDVglNutzerID.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1, {"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", UserID muss nicht gleich sein"});
            console.log("UserID muss nicht gleich sein");

        }

    });

    console.log("wegeIDVglNutzerID");
    console.log(wegeIDVglNutzerID);

    return wegeIDVglNutzerID;
}

function vergleicheStartEndKoordinaten(wegeIDVglWegepaare){

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        console.log("wegeID1");
        console.log(wegeID1);
        console.log("wegeID2");
        console.log(wegeID2);

        for (var z = 0; z < wegedatenKoordinaten.length; z++){
            if (wegeID1 == wegedatenKoordinaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedatenKoordinaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);


        console.log("weg1Zaehler");
        console.log(weg1Zaehler);
        console.log("weg2Zaehler");
        console.log(weg2Zaehler);

        console.log("wegedatenKoordinaten[weg1Zaehler]");
        console.log(wegedatenKoordinaten[weg1Zaehler]);
        console.log("wegedatenKoordinaten[weg1Zaehler].length");
        console.log(wegedatenKoordinaten[weg1Zaehler].length);
        console.log("wegedatenKoordinaten[weg2Zaehler]");
        console.log(wegedatenKoordinaten[weg2Zaehler]);
        console.log("wegedatenKoordinaten[weg2Zaehler].length");
        console.log(wegedatenKoordinaten[weg2Zaehler].length);

        var vmGleichZ = 0;
        var maxLaenge = document.getElementById("maxAbweichungKooGrob").value;
        console.log("maxLaenge");
        console.log(maxLaenge);

        if(wegedatenKoordinaten[weg1Zaehler].length == wegedatenKoordinaten[weg2Zaehler].length){

            if(vergleichsRichtung == "gleiche Richtung"){

                var k = 0;
                var l = wegedatenKoordinaten[weg1Zaehler].length-2;

                console.log(k);
                console.log(l);
                console.log("wegedatenKoordinaten[weg1Zaehler][k]");
                console.log(wegedatenKoordinaten[weg1Zaehler][k]);
                console.log("wegedatenKoordinaten[weg1Zaehler][k+1]");
                console.log(wegedatenKoordinaten[weg1Zaehler][k+1]);
                console.log("wegedatenKoordinaten[weg2Zaehler][k]");
                console.log(wegedatenKoordinaten[weg2Zaehler][k]);
                console.log("wegedatenKoordinaten[weg2Zaehler][k+1]");
                console.log(wegedatenKoordinaten[weg2Zaehler][k+1]);

                console.log(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1]);
                var vglKoo = false;
                var distanz = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1]);

                if (distanz <= maxLaenge){
                    console.log("Distanz unter Grenzwert");
                    vglKoo = true;
                } else {
                    console.log("Distanz über Grenzwert");
                }

                if(vglKoo == false){
                    vmGleichZ = vmGleichZ + 1;
                }

                console.log("wegedatenKoordinaten[weg1Zaehler][l]");
                console.log(wegedatenKoordinaten[weg1Zaehler][l]);
                console.log("wegedatenKoordinaten[weg1Zaehler][l+1]");
                console.log(wegedatenKoordinaten[weg1Zaehler][l+1]);
                console.log("wegedatenKoordinaten[weg2Zaehler][l]");
                console.log(wegedatenKoordinaten[weg2Zaehler][l]);
                console.log("wegedatenKoordinaten[weg2Zaehler][l+1]");
                console.log(wegedatenKoordinaten[weg2Zaehler][l+1]);

                console.log(wegedatenKoordinaten[weg1Zaehler][l], wegedatenKoordinaten[weg1Zaehler][l+1], wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1]);
                var vglKoo1 = false;
                var distanz1 = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][l], wegedatenKoordinaten[weg1Zaehler][l+1], wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1]);

                if (distanz1 <= maxLaenge){
                    console.log("Distanz unter Grenzwert");
                    vglKoo1 = true;
                } else {
                    console.log("Distanz über Grenzwert");
                }

                if(vglKoo1 == false){
                    vmGleichZ = vmGleichZ + 1;
                }

            } else {

                if(vergleichsRichtung == "Hin- und Rückweg"){

                    var k = 0;
                    var l = wegedatenKoordinaten[weg1Zaehler].length-2;

                    console.log(k);
                    console.log(l);
                    console.log("wegedatenKoordinaten[weg1Zaehler][k]");
                    console.log(wegedatenKoordinaten[weg1Zaehler][k]);
                    console.log("wegedatenKoordinaten[weg1Zaehler][k+1]");
                    console.log(wegedatenKoordinaten[weg1Zaehler][k+1]);
                    console.log("wegedatenKoordinaten[weg2Zaehler][l]");
                    console.log(wegedatenKoordinaten[weg2Zaehler][l]);
                    console.log("wegedatenKoordinaten[weg2Zaehler][l+1]");
                    console.log(wegedatenKoordinaten[weg2Zaehler][l+1]);

                    console.log(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1]);
                    var vglKoo = false;
                    var distanz = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1]);

                    if (distanz <= maxLaenge){
                        console.log("Distanz unter Grenzwert");
                        vglKoo = true;
                    } else {
                        console.log("Distanz über Grenzwert");
                    }

                    if(vglKoo == false){
                        vmGleichZ = vmGleichZ + 1;
                    }

                    console.log("wegedatenKoordinaten[weg1Zaehler][l]");
                    console.log(wegedatenKoordinaten[weg1Zaehler][l]);
                    console.log("wegedatenKoordinaten[weg1Zaehler][l+1]");
                    console.log(wegedatenKoordinaten[weg1Zaehler][l+1]);
                    console.log("wegedatenKoordinaten[weg2Zaehler][k]");
                    console.log(wegedatenKoordinaten[weg2Zaehler][k]);
                    console.log("wegedatenKoordinaten[weg2Zaehler][k+1]");
                    console.log(wegedatenKoordinaten[weg2Zaehler][k+1]);

                    console.log(wegedatenKoordinaten[weg1Zaehler][l], wegedatenKoordinaten[weg1Zaehler][l+1], wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1]);
                    var vglKoo1 = false;
                    var distanz1 = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][l], wegedatenKoordinaten[weg1Zaehler][l+1], wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1]);

                    if (distanz1 <= maxLaenge){
                        console.log("Distanz unter Grenzwert");
                        vglKoo1 = true;
                    } else {
                        console.log("Distanz über Grenzwert");
                    }

                    if(vglKoo1 == false){
                        vmGleichZ = vmGleichZ + 1;
                    }

                }

            }

        } else {
            console.log("Start- und End-Koordinatenanzahl stimmt nicht überein");
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Start- und End-Koordinatenanzahl stimmt nicht überein"});
        }

        if (vmGleichZ == 0){
            wegeIDVglStartEndKoordinaten.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1, {"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Start- und End-Koordinaten stimmen überein"});
            console.log("Start- und End-Koordinaten stimmen überein");
        } else {
            console.log("Start- und End-Koordinaten stimmen nicht überein");
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Start- und End-Koordinaten stimmen nicht überein"});
        }

    });

    console.log("wegeIDVglStartEndKoordinaten");
    console.log(wegeIDVglStartEndKoordinaten);

    return wegeIDVglStartEndKoordinaten;
}

function vergleicheGesamtdistanz(wegeIDVglWegepaare){

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        console.log("wegeID1");
        console.log(wegeID1);
        console.log("wegeID2");
        console.log(wegeID2);

        for (var z = 0; z < wegedatenKoordinaten.length; z++){
            if (wegeID1 == wegedatenKoordinaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedatenKoordinaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);


        console.log("weg1Zaehler");
        console.log(weg1Zaehler);
        console.log("weg2Zaehler");
        console.log(weg2Zaehler);

        console.log("wegedaten[weg1Zaehler][Distanz]");
        console.log(wegedaten[weg1Zaehler]["Distanz"]);

        console.log("wegedaten[weg2Zaehler][Distanz]");
        console.log(wegedaten[weg2Zaehler]["Distanz"]);


        var vmGleichZ = 0;
        var maxLaenge = document.getElementById("maxAbweichungDistGrob").value;
        console.log("maxLaenge");
        console.log(maxLaenge);

        var distanzweg1Zaehler = 0;
        var distanzweg1Zaehlerges = wegedaten[weg1Zaehler]["Distanz"];

        if (distanzweg1Zaehlerges.search(',') != -1){
            var distanzweg1Zaehlersplit = distanzweg1Zaehlerges.split(',');
            var distanzweg1ZaehlerKM = distanzweg1Zaehlersplit[0];

            console.log(distanzweg1ZaehlerKM);
            console.log(distanzweg1Zaehlersplit[1]);
            var distanzweg1ZaehlerM = distanzweg1Zaehlersplit[1].substr(0,1);

            console.log(distanzweg1ZaehlerM);

            //km = km.parseInt(distanzweg1ZaehlerKM);
            //m = m.parseInt(distanzweg1ZaehlerM);
            //distanzweg1Zaehler = (km*1000) + (m*100);
            distanzweg1Zaehler = (distanzweg1ZaehlerKM*1000) + (distanzweg1ZaehlerM*100);

            console.log(distanzweg1Zaehler);

        } else {
            var distanzweg1Zaehlersplit = distanzweg1Zaehlerges.split('m');
            console.log(distanzweg1Zaehlersplit[0]);

            distanzweg1Zaehler = parseInt(distanzweg1Zaehlersplit);

        }

        console.log(distanzweg1Zaehler);

        var distanzweg2Zaehler = 0;
        var distanzweg2Zaehlerges = wegedaten[weg2Zaehler]["Distanz"];

        if (distanzweg2Zaehlerges.search(',') != -1){
            var distanzweg2Zaehlersplit = distanzweg2Zaehlerges.split(',');
            var distanzweg2ZaehlerKM = distanzweg2Zaehlersplit[0];

            console.log(distanzweg2ZaehlerKM);
            console.log(distanzweg2Zaehlersplit[1]);
            var distanzweg2ZaehlerM = distanzweg2Zaehlersplit[1].substr(0,1);

            console.log(distanzweg2ZaehlerM);

            //km = km.parseInt(distanzweg2ZaehlerKM);
            //m = m.parseInt(distanzweg2ZaehlerM);
            //distanzweg2Zaehler = (km*1000) + (m*100);
            distanzweg2Zaehler = (distanzweg2ZaehlerKM*1000) + (distanzweg2ZaehlerM*100);

            console.log(distanzweg2Zaehler);

        } else {
            var distanzweg2Zaehlersplit = distanzweg2Zaehlerges.split('m');
            console.log(distanzweg2Zaehlersplit[0]);

            distanzweg2Zaehler = parseInt(distanzweg2Zaehlersplit);

        }

        console.log(distanzweg2Zaehler);

        var vglDist = false;

        var distanz = "";
        if(distanzweg1Zaehler > distanzweg2Zaehler){
            distanz = distanzweg1Zaehler - distanzweg2Zaehler;
            console.log(distanzweg1Zaehler + "-" + distanzweg2Zaehler);

        } else {
            distanz = distanzweg2Zaehler - distanzweg1Zaehler;
            console.log(distanzweg2Zaehler + "-" + distanzweg1Zaehler);
        }

        console.log(distanz);

        if (distanz <= maxLaenge){
            console.log("Distanz unter Grenzwert");
            vglDist = true;
        } else {
            console.log("Distanz über Grenzwert");
        }

        if(vglDist == false){
            vmGleichZ = vmGleichZ + 1;
        }


        if (vmGleichZ == 0){
            wegeIDVglGesamtdistanz.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1, {"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Gesamtdistanz stimmt überein"});
            console.log("Gesamtdistanz stimmt überein");
        } else {
            console.log("Gesamtdistanz stimmt nicht überein");
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Gesamtdistanz stimmt nicht überein"});
        }

    });

    console.log("wegeIDVglGesamtdistanz");
    console.log(wegeIDVglGesamtdistanz);

    return wegeIDVglGesamtdistanz;
}

function vergleicheGesamtdauer(wegeIDVglWegepaare){

    //Festlegung Zeitbereich von und bis
    var gesamtdauerStu = document.getElementById("gesamtdauerStu").value;
    var gesamtdauerMin = document.getElementById("gesamtdauerMin").value;
    var gesamtdauerSec = document.getElementById("gesamtdauerSec").value;

    var gesamtdauerMax = new Date();
    gesamtdauerMax.setHours(gesamtdauerStu, gesamtdauerMin, gesamtdauerSec);
    console.log("gesamtdauerMax");
    console.log(gesamtdauerMax);

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        for (var z = 0; z < wegedaten.length; z++){
            if (wegeID1 == wegedaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        console.log("weg1Zaehler");
        console.log(weg1Zaehler);
        console.log("weg2Zaehler");
        console.log(weg2Zaehler);

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);

        console.log("wegedaten[weg1Zaehler][Dauer]");
        console.log(wegedaten[weg1Zaehler]["Dauer"]);

        var zeit1 = wegedaten[weg1Zaehler]["Dauer"];
        var stunden1 = zeit1.substr(0,2);
        var minuten1 = zeit1.substr(3,2);
        var sekunden1 = zeit1.substr(6,2);

        var date1 = new Date();
        date1.setHours(stunden1, minuten1, sekunden1);
        console.log("date1");
        console.log(date1);

        console.log("wegedaten[weg2Zaehler][Dauer]");
        console.log(wegedaten[weg2Zaehler]["Dauer"]);

        var zeit2 = wegedaten[weg2Zaehler]["Dauer"];
        var stunden2 = zeit2.substr(0,2);
        var minuten2 = zeit2.substr(3,2);
        var sekunden2 = zeit2.substr(6,2);

        var date2 = new Date();
        date2.setHours(stunden2, minuten2, sekunden2);
        console.log("date2");
        console.log(date2);

        var vmGleichZ = 0;
        var vglZeit = false;

        var zeitdifferenz = 0;

        if(date1 < date2){
            zeitdifferenz = vergleichsFunktionZeit(date1, date2);
        } else {
            zeitdifferenz = vergleichsFunktionZeit(date2, date1);
        }

        //Vergleich Gesamtzeit
        console.log("zeitdifferenz");
        console.log(zeitdifferenz);

        var zeitdiffDate = millisekundenInDateWandeln(zeitdifferenz, gesamtdauerMax);
        console.log("zeitdiff");
        console.log(zeitdiffDate);

        if (zeitdiffDate <= gesamtdauerMax){
            console.log("Zeitdifferenz unter Grenzwert");
            vglZeit = true;
        } else {
            console.log("Zeitdifferenz über Grenzwert");
        }

        if(vglZeit == false){
            vmGleichZ = vmGleichZ + 1;
        }

        if (vmGleichZ == 0){
            wegeIDVglGesamtdauer.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Zeitdifferenz Gesamtdauer stimmt überein"});
            console.log("Zeitdifferenz Gesamtdauer stimmt überein");
        } else {
            console.log("Zeitdifferenz Gesamtdauer stimmt nicht überein");
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Zeitdifferenz Gesamtdauer stimmt nicht überein"});
        }

    });

    console.log("wegeIDVglGesamtdauer");
    console.log(wegeIDVglGesamtdauer);

    return wegeIDVglGesamtdauer;
} //vergleicheGesamtdauer()

function vergleicheKoordinaten(wegeIDVglWegepaare){

    //Vergleich Koordinaten
    // GPS-Koordinaten
    // nehme ersten Weg und suche passenden Weg in bestimmtem Durchmesser (?), Start, Ziel, Verkehrsmittelwechsel

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        console.log("wegeID1");
        console.log(wegeID1);
        console.log("wegeID2");
        console.log(wegeID2);

        for (var z = 0; z < wegedatenKoordinaten.length; z++){
            if (wegeID1 == wegedatenKoordinaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedatenKoordinaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);


        console.log("weg1Zaehler");
        console.log(weg1Zaehler);
        console.log("weg2Zaehler");
        console.log(weg2Zaehler);

        console.log("wegedatenKoordinaten[weg1Zaehler]");
        console.log(wegedatenKoordinaten[weg1Zaehler]);
        console.log("wegedatenKoordinaten[weg1Zaehler].length");
        console.log(wegedatenKoordinaten[weg1Zaehler].length);
        console.log(wegedatenKoordinaten[weg2Zaehler]);
        console.log("wegedatenKoordinaten[weg2Zaehler]");
        console.log("wegedatenKoordinaten[weg2Zaehler].length");
        console.log(wegedatenKoordinaten[weg2Zaehler].length);

        var vmGleichZ = 0;
        var maxLaenge = document.getElementById("maxAbweichung").value;
        console.log("maxLaenge");
        console.log(maxLaenge);

        if(wegedatenKoordinaten[weg1Zaehler].length == wegedatenKoordinaten[weg2Zaehler].length){

            if(vergleichsRichtung == "gleiche Richtung"){

                for( var k = 0; k < wegedatenKoordinaten[weg1Zaehler].length; k = k + 2){
                    console.log(k);
                    console.log("wegedatenKoordinaten[weg1Zaehler][k]");
                    console.log(wegedatenKoordinaten[weg1Zaehler][k]);
                    console.log("wegedatenKoordinaten[weg1Zaehler][k+1]");
                    console.log(wegedatenKoordinaten[weg1Zaehler][k+1]);
                    console.log("wegedatenKoordinaten[weg2Zaehler][k]");
                    console.log(wegedatenKoordinaten[weg2Zaehler][k]);
                    console.log("wegedatenKoordinaten[weg2Zaehler][k+1]");
                    console.log(wegedatenKoordinaten[weg2Zaehler][k+1]);

                    console.log(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1]);
                    var vglKoo = false;
                    var distanz = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1]);

                    werteKoordinaten.push(distanz);

                    if (distanz <= maxLaenge){
                        console.log("Distanz unter Grenzwert");
                        vglKoo = true;
                    } else {
                        console.log("Distanz über Grenzwert");
                    }

                    if(vglKoo == false){
                        vmGleichZ = vmGleichZ + 1;
                    }

                }

            } else {

                if(vergleichsRichtung == "Hin- und Rückweg"){
                    var l = wegedatenKoordinaten[weg1Zaehler].length-2;
                    for( var k = 0; k < wegedatenKoordinaten[weg1Zaehler].length; k = k + 2){
                        console.log("k");
                        console.log(k);
                        console.log("l");
                        console.log(l);
                        console.log("wegedatenKoordinaten[weg1Zaehler][k]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][k]);
                        console.log("wegedatenKoordinaten[weg1Zaehler][k+1]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][k+1]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][l]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][l]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][l+1]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][l+1]);

                        console.log(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1]);
                        var distanz = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1]);
                        var vglKoo = false;

                        werteKoordinaten.push(distanz);
                        l = l - 2;

                        if (distanz <= maxLaenge){
                            console.log("Distanz unter Grenzwert");
                            vglKoo = true;
                        } else {
                            console.log("Distanz über Grenzwert");
                        }

                        if(vglKoo == false){
                            vmGleichZ = vmGleichZ + 1;
                        }

                    }

                }

            }

        } else {
            console.log("Koordinatenanzahl stimmt nicht überein");
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Koordinatenanzahl stimmt nicht überein"});
        }

        if (vmGleichZ == 0){
            wegeIDVglKoordinaten.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1, {"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Koordinaten stimmen überein"});
            console.log("Koordinaten stimmen überein");
        } else {
            console.log("Koordinaten stimmen nicht überein");
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Koordinaten stimmen nicht überein"});
        }

    });

    var mittelwertKoordinaten = bildeMittelwertZahl(werteKoordinaten);

    mittelwerteWegepaare.push({"Koordinaten": mittelwertKoordinaten});

    console.log("wegeIDVglKoordinaten");
    console.log(wegeIDVglKoordinaten);
    console.log("werteKoordinaten");
    console.log(werteKoordinaten);
    console.log("mittelwerteWegepaare");
    console.log(mittelwerteWegepaare);

    return wegeIDVglKoordinaten;
} //vergleicheKoordinaten()

function vergleicheKoordinatenUmstieg(wegeIDVglWegepaare){

    //Vergleich Koordinaten Umstieg
    // GPS-Koordinaten
    // nehme ersten Weg und suche passenden Weg in bestimmtem Durchmesser (?), Start, Ziel, Verkehrsmittelwechsel

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        console.log("wegeID1");
        console.log(wegeID1);
        console.log("wegeID2");
        console.log(wegeID2);

        for (var z = 0; z < wegedatenKoordinaten.length; z++){
            if (wegeID1 == wegedatenKoordinaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedatenKoordinaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        console.log("weg1Zaehler");
        console.log(weg1Zaehler);
        console.log("weg2Zaehler");
        console.log(weg2Zaehler);

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);

        console.log("wegedatenKoordinaten[weg1Zaehler]");
        console.log(wegedatenKoordinaten[weg1Zaehler]);
        console.log("wegedatenKoordinaten[weg1Zaehler].length");
        console.log(wegedatenKoordinaten[weg1Zaehler].length);
        console.log(wegedatenKoordinaten[weg2Zaehler]);
        console.log("wegedatenKoordinaten[weg2Zaehler]");
        console.log("wegedatenKoordinaten[weg2Zaehler].length");
        console.log(wegedatenKoordinaten[weg2Zaehler].length);

        var vmGleichZ = 0;
        var maxLaenge = document.getElementById("maxAbweichungUmstieg").value;
        console.log("maxLaenge");
        console.log(maxLaenge);

        var einWayStage = false;

        if(wegedatenKoordinaten[weg1Zaehler].length == wegedatenKoordinaten[weg2Zaehler].length){

            if(wegedatenVerkehrsmittel[weg1Zaehler].length == 1){
                einWayStage = true;

            } else {

                if(vergleichsRichtung == "gleiche Richtung"){

                    for( var k = 2; k < wegedatenKoordinaten[weg1Zaehler].length-2; k = k + 4){
                        console.log(k);
                        console.log("wegedatenKoordinaten[weg1Zaehler][k]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][k]);
                        console.log("wegedatenKoordinaten[weg1Zaehler][k+1]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][k+1]);
                        console.log("wegedatenKoordinaten[weg1Zaehler][k+2]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][k+2]);
                        console.log("wegedatenKoordinaten[weg1Zaehler][k+3]");
                        console.log(wegedatenKoordinaten[weg1Zaehler][k+3]);

                        console.log("wegedatenKoordinaten[weg2Zaehler][k]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][k]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][k+1]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][k+1]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][k+2]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][k+2]);
                        console.log("wegedatenKoordinaten[weg2Zaehler][k+3]");
                        console.log(wegedatenKoordinaten[weg2Zaehler][k+3]);

                        var vglKoo = false;

                        //Vergleich Distanz weg1Zaehler][k]/weg1Zaehler][k+1] und weg1Zaehler][k+2]/weg1Zaehler][k+3]
                        console.log(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg1Zaehler][k+2], wegedatenKoordinaten[weg1Zaehler][k+3]);
                        var distanzweg1Zaehler = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg1Zaehler][k+2], wegedatenKoordinaten[weg1Zaehler][k+3]);

                        //Vergleich Distanz weg2Zaehler][k]/weg2Zaehler][k+1] und weg2Zaehler][k+2]/weg2Zaehler][k+3]
                        console.log(wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][k+2], wegedatenKoordinaten[weg2Zaehler][k+3]);
                        var distanzweg2Zaehler = vergleichsFunktion(wegedatenKoordinaten[weg2Zaehler][k], wegedatenKoordinaten[weg2Zaehler][k+1], wegedatenKoordinaten[weg2Zaehler][k+2], wegedatenKoordinaten[weg2Zaehler][k+3]);

                        var distanz = "";
                        if(distanzweg1Zaehler > distanzweg2Zaehler){
                            distanz = distanzweg1Zaehler - distanzweg2Zaehler;

                        } else {
                            distanz = distanzweg2Zaehler - distanzweg1Zaehler;
                        }

                        console.log("distanz");
                        console.log(distanz);
                        werteKoordinatenUmstieg.push(distanz);

                        if (distanz <= maxLaenge){
                            console.log("Distanz unter Grenzwert");
                            vglKoo = true;
                        } else {
                            console.log("Distanz über Grenzwert");
                        }

                        if(vglKoo == false){
                            vmGleichZ = vmGleichZ + 1;
                        }

                    }

                } else {

                    if(vergleichsRichtung == "Hin- und Rückweg"){

                        var l = wegedatenKoordinaten[weg1Zaehler].length-4;
                        for( var k = 2; k < wegedatenKoordinaten[weg1Zaehler].length-2; k = k + 4){
                            console.log("k");
                            console.log(k);
                            console.log("l");
                            console.log(l);
                            console.log("wegedatenKoordinaten[weg1Zaehler][k]");
                            console.log(wegedatenKoordinaten[weg1Zaehler][k]);
                            console.log("wegedatenKoordinaten[weg1Zaehler][k+1]");
                            console.log(wegedatenKoordinaten[weg1Zaehler][k+1]);
                            console.log("wegedatenKoordinaten[weg1Zaehler][k+2]");
                            console.log(wegedatenKoordinaten[weg1Zaehler][k+2]);
                            console.log("wegedatenKoordinaten[weg1Zaehler][k+3]");
                            console.log(wegedatenKoordinaten[weg1Zaehler][k+3]);

                            console.log("wegedatenKoordinaten[weg2Zaehler][l]");
                            console.log(wegedatenKoordinaten[weg2Zaehler][l]);
                            console.log("wegedatenKoordinaten[weg2Zaehler][l+1]");
                            console.log(wegedatenKoordinaten[weg2Zaehler][l+1]);
                            console.log("wegedatenKoordinaten[weg2Zaehler][l-2]");
                            console.log(wegedatenKoordinaten[weg2Zaehler][l-2]);
                            console.log("wegedatenKoordinaten[weg2Zaehler][l-1]");
                            console.log(wegedatenKoordinaten[weg2Zaehler][l-1]);

                            var vglKoo = false;

                            //Vergleich Distanz weg1Zaehler][k]/weg1Zaehler][k+1] und weg1Zaehler][k+2]/weg1Zaehler][k+3]
                            console.log(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg1Zaehler][k+2], wegedatenKoordinaten[weg1Zaehler][k+3]);
                            var distanzweg1Zaehler = vergleichsFunktion(wegedatenKoordinaten[weg1Zaehler][k], wegedatenKoordinaten[weg1Zaehler][k+1], wegedatenKoordinaten[weg1Zaehler][k+2], wegedatenKoordinaten[weg1Zaehler][k+3]);

                            //Vergleich Distanz weg2Zaehler][l]/weg2Zaehler][l+1] und weg2Zaehler][l22]/weg2Zaehler][l-1]
                            console.log(wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1], wegedatenKoordinaten[weg2Zaehler][l-2], wegedatenKoordinaten[weg2Zaehler][l-1]);
                            var distanzweg2Zaehler = vergleichsFunktion(wegedatenKoordinaten[weg2Zaehler][l], wegedatenKoordinaten[weg2Zaehler][l+1], wegedatenKoordinaten[weg2Zaehler][l-2], wegedatenKoordinaten[weg2Zaehler][l-1]);

                            var distanz = "";
                            if(distanzweg1Zaehler > distanzweg2Zaehler){
                                distanz = distanzweg1Zaehler - distanzweg2Zaehler;

                            } else {
                                distanz = distanzweg2Zaehler - distanzweg1Zaehler;
                            }

                            console.log("distanz");
                            console.log(distanz);
                            werteKoordinatenUmstieg.push(distanz);
                            l = l - 4;

                            if (distanz <= maxLaenge){
                                console.log("Distanz unter Grenzwert");
                                vglKoo = true;
                            } else {
                                console.log("Distanz über Grenzwert");
                            }

                            if(vglKoo == false){
                                vmGleichZ = vmGleichZ + 1;
                            }

                        }

                    }

                }

            }

        } else {
            console.log("Koordinatenanzahl Umstieg stimmt nicht überein");
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Koordinatenanzahl Umstieg stimmt nicht überein"});
        }

        if(einWayStage == true){
            wegeIDVglKoordinatenUmstieg.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Keine Koordinaten Umstieg"});
            console.log("Keine Koordinaten Umstieg");
        }else {
            if (vmGleichZ == 0){
                wegeIDVglKoordinatenUmstieg.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
                wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Koordinaten Umstieg stimmen überein"});
                console.log("Koordinaten Umstieg stimmen überein");
            } else {
                console.log("Koordinaten Umstieg stimmen nicht überein");
                wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Koordinaten Umstieg stimmen nicht überein"});
            }
        }



    });

    var mittelwertKoordinatenUmstieg = bildeMittelwertZahl(werteKoordinatenUmstieg);

    mittelwerteWegepaare.push({"Koordinaten Umstieg": mittelwertKoordinatenUmstieg});

    console.log("wegeIDVglKoordinatenUmstieg");
    console.log(wegeIDVglKoordinatenUmstieg);
    console.log("werteKoordinatenUmstieg");
    console.log(werteKoordinatenUmstieg);
    console.log("mittelwerteWegepaare");
    console.log(mittelwerteWegepaare);

    return wegeIDVglKoordinatenUmstieg;
} //vergleicheKoordinatenUmstieg()

function vergleicheStartzeit(wegeIDVglWegepaare){

    //Vergleich Zeit
    // nehme ersten Weg und suche passenden Weg in bestimmtem Zeitbereich (?)

    //Festlegung Zeitbereich von und bis
    var startzeitraumStu = document.getElementById("startzeitraumStu").value;
    var startzeitraumMin = document.getElementById("startzeitraumMin").value;
    var startzeitraumSec = document.getElementById("startzeitraumSec").value;

    var startzeitraum = new Date();
    startzeitraum.setHours(startzeitraumStu, startzeitraumMin, startzeitraumSec);
    console.log("startzeitraum");
    console.log(startzeitraum);

    var dateStart = new Date(Date.now());
    console.log("dateStart");
    console.log(dateStart);


    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        for (var z = 0; z < wegedaten.length; z++){
            if (wegeID1 == wegedaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);

        //Startzeit Weg1 als date anlegen
        var startzeit1 = wegedaten[weg1Zaehler]["Startzeit"];
        //console.log(weg1Zaehler);
        //console.log(startzeit1);

        var zeit1 = startzeit1.substr(11);
        //console.log(zeit1);
        var stunden1 = zeit1.substr(0,2);
        var minuten1 = zeit1.substr(3,2);
        var sekunden1 = zeit1.substr(6,2);
        //console.log(startzeit1);
        var tag1 = startzeit1.substr(0,2);
        var monat1 = startzeit1.substr(3,2)-1;
        var jahr1 = startzeit1.substr(6,4);
        //console.log(tag1, monat1, jahr1);
        var date1 = new Date(jahr1, monat1, tag1, stunden1, minuten1, sekunden1);
        console.log("date1");
        console.log(date1);

        //Startzeit Weg2 als date anlegen
        var startzeit2 = wegedaten[weg2Zaehler]["Startzeit"];
        //console.log(weg2Zaehler);
        //console.log(startzeit2);

        var zeit2 = startzeit2.substr(11);
        //console.log(zeit2);
        var stunden2 = zeit2.substr(0,2);
        var minuten2 = zeit2.substr(3,2);
        var sekunden2 = zeit2.substr(6,2);
        //console.log(startzeit2);
        var tag2 = startzeit2.substr(0,2);
        var monat2 = startzeit2.substr(3,2)-1;
        var jahr2 = startzeit2.substr(6,4);
        //console.log(tag2, monat2, jahr2);
        var date2 = new Date(jahr2, monat2, tag2, stunden2, minuten2, sekunden2);
        console.log("date2");
        console.log(date2);
        //date3: date2 mit gleichem Datum wie date1, damit Startzeit überprüft werden kann
        var date3 = new Date(jahr1, monat1, tag1, stunden2, minuten2, sekunden2);
        console.log("date3");
        console.log(date3);

        var zeitdifferenz ="";
        if(date1 < date3){
            zeitdifferenz = vergleichsFunktionZeit(date1, date3);
        } else {
            zeitdifferenz = vergleichsFunktionZeit(date3, date1);
        }

        console.log("zeitdifferenz");
        console.log(zeitdifferenz);

        var zeitdiffDate = millisekundenInDateWandeln(zeitdifferenz, dateStart);
        console.log("zeitdiff");
        console.log(zeitdiffDate);

        werteStartzeit.push(zeitdiffDate);

        console.log("startzeitraum");
        console.log(startzeitraum);

        if(vergleichsRichtung == "gleiche Richtung"){

            //speichere Wegepaar, wenn Weg2 im vorgegeben Zeitfenster zu Weg1 passt
            if (zeitdiffDate <= startzeitraum){
                wegeIDVglStartzeit.push(element);
                wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Startzeit stimmt überein"});
                console.log("Startzeit Wege innerhalb Zeitraum");
            } else {
                wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Startzeit stimmt nicht überein"});
                console.log("Startzeit stimmt nicht überein");
            }

        } else {

            // speichere Wegepaar, Startzeit wird bei Hin- und Rückweg nicht beachtet
            wegeIDVglStartzeit.push(element);
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Startzeit wird bei Hin- und Rückweg nicht beachtet"});
            console.log("Startzeit wird bei Hin- und Rückweg nicht beachtet");

        }

        /*//Zeitraum "von" mit Stunden, Minuten, Sekunden von Weg1 und Datum von Weg2 anlegen
        var startzeitVonStunden = parseInt(stunden1, 10) - startzeitraumStu;
        var startzeitVonMinuten = parseInt(minuten1, 10) - startzeitraumMin;
        var startzeitVonSekunden = parseInt(sekunden1, 10) - startzeitraumSec;
        //console.log(tag1);
        //console.log(stunden1, "-", startzeitraumStu);
        //console.log(minuten1, "-", startzeitraumMin);
        //console.log(sekunden1, "-", startzeitraumSec);
        //console.log(startzeitVonStunden, " ", startzeitVonMinuten, " ", startzeitVonSekunden);
        var startzeitVon = new Date(jahr2, monat2, tag2, startzeitVonStunden, startzeitVonMinuten, startzeitVonSekunden);
        console.log("startzeitVon");
        console.log(startzeitVon);

        //Zeitraum "bis" mit Stunden, Minuten, Sekunden von Weg1 und Datum von Weg2 anlegen
        var startzeitBisStunden = parseInt(stunden1, 10) + startzeitraumStu;
        var startzeitBisMinuten = parseInt(minuten1, 10) + startzeitraumMin;
        var startzeitBisSekunden = parseInt(sekunden1, 10) + startzeitraumSec;
        //console.log(tag1);
        //console.log(stunden1, "+", startzeitraumStu);
        //console.log(minuten1, "+", startzeitraumMin);
        //console.log(sekunden1, "+", startzeitraumSec);
        //console.log(startzeitBisStunden, " ", startzeitBisMinuten, " ", startzeitBisSekunden);
        var startzeitBis = new Date(jahr2, monat2, tag2, startzeitBisStunden, startzeitBisMinuten, startzeitBisSekunden);
        console.log("startzeitBis");
        console.log(startzeitBis);

        //speichere Wegepaar, wenn Weg2 im vorgegeben Zeitfenster zu Weg1 passt
        if (startzeitVon < date2 < startzeitBis){
            wegeIDVglStartzeit.push(element);
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Startzeit stimmt überein"});
            console.log("Startzeit Wege innerhalb Zeitraum");
        } else {
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Startzeit stimmt nicht überein"});
        }

         */

    });

    var mittelwertStartzeit = bildeMittelwertDate(werteStartzeit);

    mittelwerteWegepaare.push({"Startzeit": mittelwertStartzeit});

    console.log("wegeIDVglStartzeit");
    console.log(wegeIDVglStartzeit);
    console.log("werteStartzeit");
    console.log(werteStartzeit);
    console.log("mittelwerteWegepaare");
    console.log(mittelwerteWegepaare);

    return wegeIDVglStartzeit;
} //vergleicheStartzeit()

function vergleicheUmstiegszeit(wegeIDVglWegepaare){

    //Vergleich Zeit
    // nehme ersten Weg und suche passenden Weg in bestimmtem Zeitbereich (?)

    //Festlegung Zeitbereich von und bis
    var umstiegszeitStu = document.getElementById("umstiegszeitStu").value;
    var umstiegszeitMin = document.getElementById("umstiegszeitMin").value;
    var umstiegszeitSec = document.getElementById("umstiegszeitSec").value;

    var umstiegszeitMax = new Date();
    umstiegszeitMax.setHours(umstiegszeitStu, umstiegszeitMin, umstiegszeitSec);
    console.log("umstiegszeitMax");
    console.log(umstiegszeitMax);

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        for (var z = 0; z < wegedaten.length; z++){
            if (wegeID1 == wegedaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        console.log("weg1Zaehler");
        console.log(weg1Zaehler);
        console.log("weg2Zaehler");
        console.log(weg2Zaehler);

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);

        console.log("wegedatenAbfahrtAnkunft[weg1Zaehler]");
        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler]);
        console.log("wegedatenAbfahrtAnkunft[weg1Zaehler].length");
        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler].length);
        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler]);
        console.log("wegedatenAbfahrtAnkunft[weg2Zaehler]");
        console.log("wegedatenAbfahrtAnkunft[weg2Zaehler].length");
        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler].length);

        var vmGleichZ = 0;
        var einWayStage = false;

        if(wegedatenAbfahrtAnkunft[weg1Zaehler].length == wegedatenAbfahrtAnkunft[weg2Zaehler].length){

            if(wegedatenVerkehrsmittel[weg1Zaehler].length == 1){
                einWayStage = true;

            } else {

                if(vergleichsRichtung == "gleiche Richtung"){

                    for( var k = 0; k < wegedatenAbfahrtAnkunft[weg1Zaehler].length-2; k = k + 2){
                        console.log(k);
                        console.log("wegedatenAbfahrtAnkunft[weg1Zaehler][k+1]");
                        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][k+1]);
                        console.log("wegedatenAbfahrtAnkunft[weg1Zaehler][k+2]");
                        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][k+2]);

                        console.log("wegedatenAbfahrtAnkunft[weg2Zaehler][k+1]");
                        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][k+1]);
                        console.log("wegedatenAbfahrtAnkunft[weg2Zaehler][k+2]");
                        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][k+2]);

                        var vglZeit = false;

                        //Vergleich Umstiegszeit weg1Zaehler][k+1] und weg1Zaehler][k+2]
                        console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][k+1], wegedatenAbfahrtAnkunft[weg1Zaehler][k+2]);
                        var umstiegszeitweg1Zaehler = vergleichsFunktionZeit(wegedatenAbfahrtAnkunft[weg1Zaehler][k+1], wegedatenAbfahrtAnkunft[weg1Zaehler][k+2]);
                        console.log("umstiegszeitweg1Zaehler");
                        console.log(umstiegszeitweg1Zaehler);

                        //Vergleich Umstiegszeit weg2Zaehler][k] und weg2Zaehler][k+1]
                        console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][k+1], wegedatenAbfahrtAnkunft[weg2Zaehler][k+1]);
                        var umstiegszeitweg2Zaehler = vergleichsFunktionZeit(wegedatenAbfahrtAnkunft[weg2Zaehler][k+1], wegedatenAbfahrtAnkunft[weg2Zaehler][k+2]);
                        console.log("umstiegszeitweg2Zaehler");
                        console.log(umstiegszeitweg2Zaehler);

                        var zeitdifferenz = "";
                        if(umstiegszeitweg1Zaehler > umstiegszeitweg2Zaehler){
                            zeitdifferenz = umstiegszeitweg1Zaehler - umstiegszeitweg2Zaehler;
                        } else {
                            zeitdifferenz = umstiegszeitweg2Zaehler - umstiegszeitweg1Zaehler;
                        }

                        console.log("zeitdifferenz");
                        console.log(zeitdifferenz);

                        var zeitdiffDate = millisekundenInDateWandeln(zeitdifferenz, umstiegszeitMax);
                        console.log("zeitdiff");
                        console.log(zeitdiffDate);

                        werteUmsteigszeit.push(zeitdiffDate);

                        if (zeitdiffDate <= umstiegszeitMax){
                            console.log("Zeitdifferenz unter Grenzwert");
                            vglZeit = true;
                        } else {
                            console.log("Zeitdifferenz über Grenzwert");
                        }

                        if(vglZeit == false){
                            vmGleichZ = vmGleichZ + 1;
                        }

                    }

                } else {

                    if(vergleichsRichtung == "Hin- und Rückweg"){

                        var l = wegedatenAbfahrtAnkunft[weg1Zaehler].length-2;
                        for( var k = 0; k < wegedatenAbfahrtAnkunft[weg1Zaehler].length-2; k = k + 2){
                            console.log("k");
                            console.log(k);
                            console.log("l");
                            console.log(l);
                            console.log("wegedatenAbfahrtAnkunft[weg1Zaehler][k+1]");
                            console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][k+1]);
                            console.log("wegedatenAbfahrtAnkunft[weg1Zaehler][k+2]");
                            console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][k+2]);

                            console.log("wegedatenAbfahrtAnkunft[weg2Zaehler][l-1]");
                            console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][l-1]);
                            console.log("wegedatenAbfahrtAnkunft[weg2Zaehler][l]");
                            console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][l]);

                            var vglZeit = false;

                            //Vergleich Umstiegszeit weg1Zaehler][k+1] und weg1Zaehler][k+2]
                            console.log(wegedatenAbfahrtAnkunft[weg1Zaehler][k+1], wegedatenAbfahrtAnkunft[weg1Zaehler][k+2]);
                            var umstiegszeitweg1Zaehler = vergleichsFunktionZeit(wegedatenAbfahrtAnkunft[weg1Zaehler][k+1], wegedatenAbfahrtAnkunft[weg1Zaehler][k+2]);
                            console.log("umstiegszeitweg1Zaehler");
                            console.log(umstiegszeitweg1Zaehler);

                            //Vergleich Umstiegszeit weg2Zaehler][l-1] und weg2Zaehler][l]
                            console.log(wegedatenAbfahrtAnkunft[weg2Zaehler][l-1], wegedatenAbfahrtAnkunft[weg2Zaehler][l]);
                            var umstiegszeitweg2Zaehler = vergleichsFunktionZeit(wegedatenAbfahrtAnkunft[weg2Zaehler][l-1], wegedatenAbfahrtAnkunft[weg2Zaehler][l]);
                            console.log("umstiegszeitweg2Zaehler");
                            console.log(umstiegszeitweg2Zaehler);

                            var zeitdifferenz = "";
                            if(umstiegszeitweg1Zaehler > umstiegszeitweg2Zaehler){
                                zeitdifferenz = umstiegszeitweg1Zaehler - umstiegszeitweg2Zaehler;
                            } else {
                                zeitdifferenz = umstiegszeitweg2Zaehler - umstiegszeitweg1Zaehler;
                            }

                            console.log("zeitdifferenz");
                            console.log(zeitdifferenz);

                            var zeitdiffDate = millisekundenInDateWandeln(zeitdifferenz, umstiegszeitMax);
                            console.log("zeitdiff");
                            console.log(zeitdiffDate);

                            werteUmsteigszeit.push(zeitdiffDate);
                            l = l - 2;

                            if (zeitdiffDate <= umstiegszeitMax){
                                console.log("Zeitdifferenz unter Grenzwert");
                                vglZeit = true;
                            } else {
                                console.log("Zeitdifferenz über Grenzwert");
                            }

                            if(vglZeit == false){
                                vmGleichZ = vmGleichZ + 1;
                            }

                        }

                    }

                }


            }

        } else {
            console.log("Anzahl Zeitwerte Umstieg stimmt nicht überein");
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Anzahl Zeitwerte Umstieg stimmt nicht überein"});
        }

        if(einWayStage == true){
            wegeIDVglDauerUmstieg.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Keine Zeitdifferenz Umstieg"});
            console.log("Keine Zeitdifferenz Umstieg");
        } else {
            if (vmGleichZ == 0){
                wegeIDVglDauerUmstieg.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
                wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Zeitdifferenz Umstieg stimmt überein"});
                console.log("Zeitdifferenz Umstieg stimmt überein");
            } else {
                console.log("Zeitdifferenz Umstieg stimmt nicht überein");
                wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Zeitdifferenz Umstieg stimmt nicht überein"});
            }
        }

    });

    var mittelwertUmstiegszeit = bildeMittelwertDate(werteUmsteigszeit);

    mittelwerteWegepaare.push({"Umsteigszeit": mittelwertUmstiegszeit});

    console.log("wegeIDVglDauerUmstieg");
    console.log(wegeIDVglDauerUmstieg);
    console.log("werteUmstiegszeit");
    console.log(werteUmsteigszeit);
    console.log("mittelwerteWegepaare");
    console.log(mittelwerteWegepaare);

    return wegeIDVglDauerUmstieg;
} //vergleicheUmstiegszeit()

function vergleicheWegezweck(wegeIDVglWegepaare){

    //Vergleich Wegezweck
    // nehme ersten Weg und suche passenden Weg mit gleichem Wegezweck

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var weg1Zaehler = "";
        var wegeID2 = element["WegeID 2"];
        var weg2Zaehler = "";
        var userID = element["UserID"];

        for (var z = 0; z < wegedaten.length; z++){
            if (wegeID1 == wegedaten[z]["WegeID"]){
                weg1Zaehler = z;
            }
            if (wegeID2 == wegedaten[z]["WegeID"]){
                weg2Zaehler = z;
            }

        }

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);


        var wegeZweck1= wegedaten[weg1Zaehler]["Wegezweck"];

        //console.log(weg1Zaehler);
        console.log("wegeZweck1");
        console.log(wegeZweck1);

        var wegeZweck2= wegedaten[weg2Zaehler]["Wegezweck"];

        //console.log(weg2Zaehler);
        console.log("wegeZweck2");
        console.log(wegeZweck2);

        werteWegezweck.push({"Wegezweck 1": wegeZweck1, "Wegezweck 2": wegeZweck2});

        //speichere Wegepaar, wenn Wegezweck von Weg1 und Weg1 gleich ist
        if (wegeZweck1 == wegeZweck2){
            wegeIDVglWegezweck.push(element);
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Wegezweck stimmt überein"});
            console.log("Wegezweck stimmt überein");
        } else {
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Wegezweck stimmt nicht überein"});
        }

    });

    var mittelwertWegezweck = bildeMittelwertWegezweck(werteWegezweck);

    mittelwerteWegepaare.push({"Wegezweck": mittelwertWegezweck});

    console.log("wegeIDVglWegezweck ");
    console.log(wegeIDVglWegezweck);
    console.log("werteWegezweck");
    console.log(werteWegezweck);
    console.log("mittelwerteWegepaare");
    console.log(mittelwerteWegepaare);

    return wegeIDVglWegezweck;
}

function vergleicheVerkehrsmittel(wegeIDVglWegepaare) {

    //Vergleich Verkehrsmittel
    // nehme ersten Weg und suche passenden Weg mit gleichem Verkehrsmittel

    wegeIDVglWegepaare.forEach(function(element){

        var wegeID1 = element["WegeID 1"];
        var wegeID2 = element["WegeID 2"];
        console.log("wegeID1");
        console.log(wegeID1);
        console.log("wegeID2");
        console.log(wegeID2);
        var userID = element["UserID"];

        var zaehlerwegedatenVM1 = "";
        var zaehlerwegedatenVM2 = "";

        for (var z = 0; z < wegedatenVerkehrsmittel.length; z++){
            if (wegeID1 == wegedatenVerkehrsmittel[z]["WegeID"]){
                zaehlerwegedatenVM1 = z;
            }
            if (wegeID2 == wegedatenVerkehrsmittel[z]["WegeID"]){
                zaehlerwegedatenVM2 = z;
            }

        }

        console.log("zaehlerwegedatenVM1");
        console.log(zaehlerwegedatenVM1);
        console.log("zaehlerwegedatenVM2");
        console.log(zaehlerwegedatenVM2);

        var wegZaehlerX = 0;

        for (var x = 0; x < wegeIDVglWegepaareAnfang.length; x++) {
            if (wegeID1 == wegeIDVglWegepaareAnfang[x]["WegeID 1"] && wegeID2 == wegeIDVglWegepaareAnfang[x]["WegeID 2"]) {
                wegZaehlerX = x;
            }
        }

        console.log("wegeIDVglWegepaareAnfang[wegZaehlerX]");
        console.log(wegeIDVglWegepaareAnfang[wegZaehlerX]);

        var kommentar = wegeIDVglWegepaareAnfang[wegZaehlerX]["Kommentar"];
        console.log("kommentar");
        console.log(kommentar);

        var vmGleichZ = 0;

        var vmListe1 = "";
        var vmListe2 = "";

        if(wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length == wegedatenVerkehrsmittel[zaehlerwegedatenVM2].length){

            if(vergleichsRichtung == "gleiche Richtung"){

                for (var w = 0; w < wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length; w++){
                    console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]");
                    console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]);
                    console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM2][w]");
                    console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM2][w]);

                    vmListe1 = vmListe1 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w];
                    vmListe2 = vmListe2 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM2][w];

                    var vglVM = false;

                    if(wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w] == wegedatenVerkehrsmittel[zaehlerwegedatenVM2][w]){
                        console.log("Verkehrsmittel gleich");
                        vglVM = true;
                    } else {
                        console.log("Verkehrsmittel stimmen nicht überein");
                    }

                    if(vglVM == false){
                        vmGleichZ = vmGleichZ + 1;
                    }

                }

            } else {

                if(vergleichsRichtung == "Hin- und Rückweg") {

                    var v = wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length-1;
                    for (var w = 0; w < wegedatenVerkehrsmittel[zaehlerwegedatenVM1].length; w++){
                        console.log("w");
                        console.log(w);
                        console.log("v");
                        console.log(v);
                        console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]");
                        console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w]);
                        console.log("wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v]");
                        console.log(wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v]);

                        vmListe1 = vmListe1 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w];
                        vmListe2 = vmListe2 + " + " + wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v];

                        var vglVM = false;

                        if(wegedatenVerkehrsmittel[zaehlerwegedatenVM1][w] == wegedatenVerkehrsmittel[zaehlerwegedatenVM2][v]){
                            console.log("Verkehrsmittel gleich");
                            vglVM = true;
                        } else {
                            console.log("Verkehrsmittel stimmen nicht überein");
                        }

                        if(vglVM == false){
                            vmGleichZ = vmGleichZ + 1;
                        }
                        v = v - 1;

                    }

                }

            }


        } else {
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Verkehrsmittelanzahl stimmt nicht überein"});
            console.log("Verkehrsmittelanzahl stimmt nicht überein");
        }

        werteVerkehrsmittel.push({"Verkehrsmittel 1": vmListe1, "Verkehrsmittel 2": vmListe2});

        if (vmGleichZ == 0){
            wegeIDVglVerkehrsmittel.push({"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID});
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Verkehrsmittel stimmen überein"});
            console.log("Verkehrsmittel stimmen überein");
        } else {
            wegeIDVglWegepaareAnfang.splice(wegZaehlerX, 1,{"WegeID 1": wegeID1, "WegeID 2": wegeID2, "UserID": userID, "Kommentar": kommentar + ", Verkehrsmittel stimmen nicht überein"});
            console.log("Verkehrsmittel stimmen nicht überein");
        }

    });

    var mittelwertVerkehrsmittel = bildeMittelwertVerkehrsmittel(werteVerkehrsmittel);

    mittelwerteWegepaare.push({"Verkehrsmittel": mittelwertVerkehrsmittel});

    console.log("wegeIDVglVerkehrsmittel");
    console.log(wegeIDVglVerkehrsmittel);
    console.log("werteVerkehrsmittel");
    console.log(werteVerkehrsmittel);
    console.log("mittelwerteWegepaare");
    console.log(mittelwerteWegepaare);

    return wegeIDVglVerkehrsmittel;
} //Ende vergleiche Verkehrsmittel()
//Ende Vergleichsfunktionen

//X Ausgabe und Zeichnen Funktion
function ausgabeGrobVgl(wegeIDVglWegepaare){

    // Rufe Ausgabe auf, in der alle dargestellten Wege aufgeführt werden
    document.getElementById("box7").style.display = "block";

    console.log("mittelwerteWegepaareAlle");
    console.log(mittelwerteWegepaareAlle);

    console.log(mittelwerteWegepaareAlle[0]["Koordinaten"]);
    console.log(mittelwerteWegepaareAlle[1]["Koordinaten Umstieg"]);
    console.log(mittelwerteWegepaareAlle[2]["Startzeit"]);
    console.log(mittelwerteWegepaareAlle[3]["Umstiegszeit"]);
    console.log(mittelwerteWegepaareAlle[4]["Wegezweck"]);
    console.log(mittelwerteWegepaareAlle[5]["Verkehrsmittel"]);

    //Ausgabe alle Mittelwerte
    var mittelwerte = "<b class='content'>Mittelwerte alle Wegepaare: </b>"
        + "<br class='content'>Differenz Koordinaten: </br>" + "<span class='content'>"+ mittelwerteWegepaareAlle[0]["Koordinaten"] +"</span>"
        + "<br class='content'>Differenz Koordinaten Umstieg: </br>" + "<span class='content'>"+ mittelwerteWegepaareAlle[1]["Koordinaten Umstieg"] +"</span>"
        + "<br class='content'>Differenz Startzeit: </br>" + "<span class='content'>"+ mittelwerteWegepaareAlle[2]["Startzeit"] +"</span>"
        + "<br class='content'>Differenz Umstiegszeit: </br>" + "<span class='content'>"+ mittelwerteWegepaareAlle[3]["Umstiegszeit"] +"</span>"
        + "<br class='content'>Differenz Wegezweck: </br>" + "<span class='content'>"+ mittelwerteWegepaareAlle[4]["Wegezweck"] +"</span>"
        + "<br class='content'>Differenz Verkehrsmittel: </br>" + "<span class='content'>"+ mittelwerteWegepaareAlle[5]["Verkehrsmittel"] +"</span>" +"<p></p>";
    var selM = document.getElementById("AusgabeMittelwerte");
    var mittel = document.createElement('Mittelwerte');
    mittel.innerHTML = mittelwerte;
    mittel.value = mittelwerte;
    selM.appendChild(mittel);

    //Ausgabe aller Wegepaare
    var anzahlAlle = wegeIDVglWegepaareAnfang.length;
    var ausgabeAnzahlAlle = "<b class='content'>Anzahl alle Wegepaare: </b>" + "<span class='content'>"+ anzahlAlle +"</span>" +"<p></p>";
    var sel = document.getElementById("AusgabeAlleGrob");
    var anzahl = document.createElement('AnzahlAlleGrob');
    anzahl.innerHTML = ausgabeAnzahlAlle;
    anzahl.value = ausgabeAnzahlAlle;
    sel.appendChild(anzahl);

    wegeIDVglWegepaareAnfang.forEach(function(element,index){
        var wegeID1 = element["WegeID 1"];
        var wegeID2 = element["WegeID 2"];
        var userIDvgl = element["UserID"];
        var kommentar = element["Kommentar"];

        // Ausgabe aller Wegepaare
        var wegepaarNeu = "<b class='content'>Wegepaar: </b>" + "<span class='content'>"+ index +"</span>" +
            "<br class='content'>WegeID 1: </br>" + "<span class='content'>" + wegeID1 +"</span>" +
            "<br class='content'>WegeID 2: </br>" + "<span class='content'>" + wegeID2 +"</span>" +
            "<br class='content'>UserID: </br>" + "<span class='content'>" + userIDvgl +"</span>" +
            "<br class='content'>Kommentar: </br>" + "<span class='content'>" + kommentar +"</span>" +"<p></p>";
        var sel = document.getElementById("AusgabeAlleGrob");
        var wegepaar = document.createElement('WegepaarGrob');
        wegepaar.innerHTML = wegepaarNeu;
        wegepaar.value = wegepaarNeu;
        sel.appendChild(wegepaar);

    });


    //Ausgabe aller Wegepaare, die Vergleichskriterien entsprechen udn Darstellung auf der Karte

    var anzahlVgl = wegeIDVglWegepaare.length;
    var ausgabeAnzahlVgl = "<b class='content'>Anzahl dargestellte Wegepaare: </b>" + "<span class='content'>"+ anzahlVgl +"</span>" +"<p></p>";
    var sel1 = document.getElementById("AusgabeGrob");
    var anzahlVgl = document.createElement('AnzahlGrob');
    anzahlVgl.innerHTML = ausgabeAnzahlVgl;
    anzahlVgl.value = ausgabeAnzahlVgl;
    sel1.appendChild(anzahlVgl);


    // alle Verkehrsmittel dem Array verkehrsmittel hinzufügen
    var verkehrsmittel = new Array();
    verkehrsmittel = ['zu Fuß', 'Fahrrad', 'Bus', 'Straßenbahn', 'S-Bahn', 'U-Bahn', 'Schiff/ Fähre', 'Auto (Fahrer)', 'Auto (Mitfahrer)', 'Reisebus', 'Flugzeug', 'Fernbus', 'Taxi'];

    wegeIDVglWegepaare.forEach(function(element,index){

        var wegeID1 = element["WegeID 1"];
        var wegeID2 = element["WegeID 2"];
        var userIDvgl = element["UserID"];

        console.log(index);

        // Füge neue wegeID dem Array wegeIDVglAusgabe hinzu (Array wegeIDVglAusgabe noch leer)
        if(wegeIDVglAusgabe.length == 0){
            wegeIDVglAusgabe.push(wegeID1);
            wegeIDVglAusgabe.push(wegeID2);
        }

        var hilf1 = false;
        var hilf2 = false;

        // Wenn neue wegeID noch nicht im Array wegeIDVglAusgabe enthalten ist füge neue wegeID hinzu

        wegeIDVglAusgabe.forEach(function(element) {
            if(element == wegeID1){
                hilf1 = true;
            }
            if(element == wegeID2){
                hilf2 = true;
            }
        });

        if(hilf1 == false){
            wegeIDVglAusgabe.push(wegeID1);
        }
        if(hilf2 == false){
            wegeIDVglAusgabe.push(wegeID2);
        }

        // Ausgabe Wegepaare
        var wegepaarNeu = "<b class='content'>Wegepaar: </b>" + "<span class='content'>"+ index +"</span>" +
            "<br class='content'>WegeID 1: </br>" + "<span class='content'>" + wegeID1 +"</span>" +
            "<br class='content'>WegeID 2: </br>" + "<span class='content'>" + wegeID2 +"</span>" +
            "<br class='content'>UserID: </br>" + "<span class='content'>" + userIDvgl +"</span>" +"<p></p>";
        var sel = document.getElementById("AusgabeGrob");
        var wegepaar = document.createElement('WegepaarGrob');
        wegepaar.innerHTML = wegepaarNeu;
        wegepaar.value = wegepaarNeu;
        sel.appendChild(wegepaar);

    });

    console.log("wegeIDVglAusgabe");
    console.log(wegeIDVglAusgabe);

    // load selected JSON Files
    let filesAuswahl = document.getElementById("jsonFiles").files;

    // read selected JSON Files
    for(file of filesAuswahl) {
        let readerAuswahl = new FileReader();
        readerAuswahl.onload = function (f) {
            let content = JSON.parse(f.target.result);

            // Speichere akutelle WegeID
            var aktuelleWegeId = content[0]["a0_wayUUID"];

            // gehe durch Array wegeIDVglAusgabe (alle gefilterten wegeIDs)
            for(var a = 0; a < wegeIDVglAusgabe.length; a++){

                // wenn aktueller Weg in wegeIDVglAusgabe enthalten gehe weiter
                if(wegeIDVglAusgabe[a] == aktuelleWegeId){

                    // looping through wayStages
                    let wayStage = (content[0]["a5_wayStages"])
                    //console.log(wayStage)

                    var alleWayStages = "";
                    var f = 0;

                    // looping though coordinatesList
                    for (var i = 0; i < wayStage.length; i++) {

                        let cor = (wayStage[i]["a3_coordinatesList"])

                        var anzC = 0;
                        var lat ;
                        var lng ;

                        var zaehler = "";

                        for(var c = 0; c < wegedatenKoordinaten.length; c++){
                            if(aktuelleWegeId == wegedatenKoordinaten[c]["WegeID"]){
                                zaehler = c;
                            }
                        }

                        for (var d = 0; d < cor.length; d++){
                            lat = cor[d]["coordinate_lat"];
                            lng = cor[d]["coordinate_lng"];
                            coordinates_lat.push(lat);
                            coordinates_lng.push(lng);
                            anzC = anzC + 1;
                        }
                        console.log(anzC);

                        var aLatN = wegedatenKoordinaten[zaehler][f];
                        var aLngN = wegedatenKoordinaten[zaehler][f+1];

                        var aLatL = wegedatenKoordinaten[zaehler][f+2];
                        var aLngL = wegedatenKoordinaten[zaehler][f+3];

                        f = f + 4;

                        console.log("lat[0]: " + aLatN);
                        console.log("lng[0]: " + aLngN);

                        console.log("lat[anzC]: " + aLatL);
                        console.log("lng[anzC]: " + aLngL);

                        // speichere Verkehrsmittel der Etappe/wayStage
                        let vm = (wayStage[i]["a0_mode"]);

                        for(var b = 0; b < verkehrsmittel.length; b++){
                            if(verkehrsmittel[b] == vm){
                                // wenn Verkehrsmittel im Filter gesetzt wurde und mit Verkehrsmittel des wayStages übereinstimmt zeichne Weg

                                var coordinateTuples = []
                                if (wayStage[i]["a3_coordinatesList"] !== undefined) {
                                    let coordinate = (wayStage[i]["a3_coordinatesList"])

                                    var farbe = "";

                                    // adding pairs of coordinates to list
                                    for (var j = 0; j < coordinate.length; j++) {
                                        coordinateTuples.push([coordinate[j]['coordinate_lat'], coordinate[j]['coordinate_lng']]);
                                    }

                                    // polyline random color picker
                                    function get_random_color() {
                                        var letters = '0123456789ABCDEF'.split('');
                                        var color = '#';
                                        for (var k = 0; k < 6; k++) {
                                            color += letters[Math.round(Math.random() * 15)];
                                        }
                                        farbe = color;
                                        return color;
                                    }

                                    // creating poly line options
                                    var polyLineOptions = {color: get_random_color()};

                                    polyline = new L.Polyline(coordinateTuples, polyLineOptions).addTo(map);
                                    polylines.push(polyline);

                                    /*console.log("coordinateTuples");
                                    console.log(coordinateTuples);

                                    var anzahlWeg = listGeoJson[0].features.length;
                                    listGeoJson[0].features.splice(anzahlWeg,1,{"type":"Feature","geometry":{"type":"LineString","coordinates":coordinateTuples},"properties":{"name": anzahlWeg,"colorCode": farbe}},);

                                    console.log("listGeoJson");
                                    console.log(listGeoJson);

                                     */

                                    // speichere Wegeinfo für Ausgabe

                                    var einWayStage =  "<span class='test' style='color:" + farbe+ ";'><br><b class='content'>WayStage: </b>" + "<span class='content'>"+ i +
                                        "</span>"+ "<br><span class='content'>Verkehrsmittel: </span>" + "<span class='content'>"+ wayStage[i]["a0_mode"] +"</span>" +
                                        "<br><span class='content'>Dauer: </span>" + "<span class='content'>"+ wayStage[i]["a1_duration"] +"</span>"+
                                        "<br><span class='content'>Distanz: </span>" + "<span class='content'>"+ wayStage[i]["a2_distance"] +"</span>"+
                                        "<br><span class='content'>lat[0]: </span>" + "<span class='content'>"+ aLatN +"</span>" +
                                        "<br><span class='content'>lng[0]: </span>" + "<span class='content'>"+ aLngN +"</span>" + "<br><span class='content'>lat[anzC]: </span>" +
                                        "<span class='content'>"+ aLatL +"</span>" + "<br><span class='content'>lng[anzC]: </span>" + "<span class='content'>"+ aLngL +"</span></span>" ;

                                    console.log("Farbe" + farbe);
                                    //console.log(einWayStage);

                                    alleWayStages = alleWayStages + einWayStage;

                                }
                            }
                        }
                    }

                    // Ausgabe mit Wegedaten des gezeichneten Weges befüllen
                    var wegeInfo = "<b class='content'>WegeID: </b>" + "<span class='content'>"+ content[0]["a0_wayUUID"] +"</span>" +
                        "<br><b class='content'>NutzerID: </b>" + "<span class='content'>" + content[0]["a6_userID"] +"</span>" +
                        "<br><b class='content'>NutzerID (nicht ausgewertet): </b>" + "<span class='content'>" + content[0]["a7_userID"] +"</span>" +
                        "<br><b class='content'>Wegezweck: </b>" + "<span class='content'>" +content[0]["a4_purpose"]  +"</span>" +
                        "<br><b class='content'>Start: </b>" + "<span class='content'>"+ content[0]["a1_startTime"] +"</span>" +
                        "<br><b class='content'>Dauer: </b>" + "<span class='content'>"+content[0]["a2_duration"] +"</span>" +
                        "<br><b class='content'>Distanz: </b>" + "<span class='content'>"+ content[0]["a3_distance"] +
                        "</span>" + "<br><b class='content'>WayStages: </b>" + alleWayStages + "<p></p>";
                    var sel = document.getElementById("AusgabeGrob");
                    var weg = document.createElement('WegGrob');
                    weg.innerHTML = wegeInfo;
                    weg.value = wegeInfo;
                    sel.appendChild(weg);
                }
            }
        }
        readerAuswahl.readAsText(file);
    }

} // Ende ()

function ausgabeWegVgl(wegeIDVglWegepaare){

    console.log("ausgabeWegVgl");

    // alle Wege von der Karte löschen
    polylines.forEach(function (item) {
        map.removeLayer(item)
    });

    // Rufe Ausgabe auf, in der alle dargestellten Wege aufgeführt werden
    document.getElementById("box10").style.display = "block";

    wegeIDVglAusgabe = [];
    console.log("wegeIDVglWegepaare");
    console.log(wegeIDVglWegepaare);
    console.log("wegeIDVglAusgabe");
    console.log(wegeIDVglAusgabe);

    //Ausgabe aller Wegepaare
    var anzahlAlle = wegeIDVglWegepaareAnfang.length;
    var ausgabeAnzahlAlle = "<b class='content'>Anzahl alle Wegepaare: </b>" + "<span class='content'>"+ anzahlAlle +"</span>" +"<p></p>";
    var sel = document.getElementById("AusgabeAlle");
    var anzahl = document.createElement('AnzahlAlle');
    anzahl.innerHTML = ausgabeAnzahlAlle;
    anzahl.value = ausgabeAnzahlAlle;
    sel.appendChild(anzahl);

    wegeIDVglWegepaareAnfang.forEach(function(element,index){
        var wegeID1 = element["WegeID 1"];
        var wegeID2 = element["WegeID 2"];
        var userIDvgl = element["UserID"];
        var kommentar = element["Kommentar"];

        // Ausgabe aller Wegepaare
        var wegepaarNeu = "<b class='content'>Wegepaar: </b>" + "<span class='content'>"+ index +"</span>" +
            "<br class='content'>WegeID 1: </br>" + "<span class='content'>" + wegeID1 +"</span>" +
            "<br class='content'>WegeID 2: </br>" + "<span class='content'>" + wegeID2 +"</span>" +
            "<br class='content'>UserID: </br>" + "<span class='content'>" + userIDvgl +"</span>" +
            "<br class='content'>Kommentar: </br>" + "<span class='content'>" + kommentar +"</span>" +"<p></p>";
        var sel = document.getElementById("AusgabeAlle");
        var wegepaar = document.createElement('Wegepaar');
        wegepaar.innerHTML = wegepaarNeu;
        wegepaar.value = wegepaarNeu;
        sel.appendChild(wegepaar);

    });

    var ergebnisseFilter = "<b class='content'>Anzahl aller grob gefilterten Wegepaare: </b>" + "<span class='content'>" + anzahlAlleGrobGefiltertenWegepaare + "</span>" +
        "<br class='content'><b>Anzahl Wege, die Vergleichskriterium entsprechen: </b>" +
        "<br class='content'> Koordinaten: " + "<span class='content'>" + wegeIDVglKoordinaten.length + "</span>" +
        "<br class='content'> Umstiegsweg: " + "<span class='content'>" + wegeIDVglKoordinatenUmstieg.length + "</span>" +
        "<br class='content'> Startzeit: " +  "<span class='content'>" +wegeIDVglStartzeit.length + "</span>" +
        "<br class='content'> Umstiegsdauer: " + "<span class='content'>" + wegeIDVglDauerUmstieg.length + "</span>" +
        "<br class='content'> Wegezweck: " + "<span class='content'>" + wegeIDVglWegezweck.length + "</span>" +
        "<br class='content'> Verkehrsmittel: " + "<span class='content'>" + wegeIDVglVerkehrsmittel.length + "</span>" + "<p></p>";
    var sel = document.getElementById("AusgabeErgebnisFilter");
    var erg = document.createElement('Ergebnis');
    erg.innerHTML = ergebnisseFilter;
    erg.value = ergebnisseFilter;
    sel.appendChild(erg);

    var ausgabegewaehlteFilter = "";
    gewaehlteFilter.forEach(function(element){
        ausgabegewaehlteFilter = ausgabegewaehlteFilter + element + "+";
    });
    var auswahlFilter = "<b class='content'>Ausgewählte Vergleichskriterien: </b>" +
        "<span class='content'>" + ausgabegewaehlteFilter + "</span>" + "<p></p>";
    var sel = document.getElementById("AusgabeGewaehlteFilter");
    var erg = document.createElement('Ergebnis');
    erg.innerHTML = auswahlFilter;
    erg.value = auswahlFilter;
    sel.appendChild(erg);

    //Ausgabe aller Wegepaare, die Vergleichskriterien entsprechen und Darstellung der Wege auf der Karte

    var anzahlVgl = wegeIDVglWegepaare.length;
    var ausgabeAnzahlVgl = "<b class='content'>Anzahl dargestellte Wegepaare: </b>" + "<span class='content'>"+ anzahlVgl +"</span>" +"<p></p>";
    var sel1 = document.getElementById("AusgabeFilter");
    var anzahlVgl = document.createElement('AnzahlVgl');
    anzahlVgl.innerHTML = ausgabeAnzahlVgl;
    anzahlVgl.value = ausgabeAnzahlVgl;
    sel1.appendChild(anzahlVgl);


    // alle Verkehrsmittel dem Array verkehrsmittel hinzufügen
    var verkehrsmittel = new Array();
    verkehrsmittel = ['zu Fuß', 'Fahrrad', 'Bus', 'Straßenbahn', 'S-Bahn', 'U-Bahn', 'Schiff/ Fähre', 'Auto (Fahrer)', 'Auto (Mitfahrer)', 'Reisebus', 'Flugzeug', 'Fernbus', 'Taxi'];

    wegeIDVglWegepaare.forEach(function(element,index){

        var wegeID1 = element["WegeID 1"];
        var wegeID2 = element["WegeID 2"];
        var userIDvgl = element["UserID"];

        console.log(index);

        // Füge neue wegeID dem Array wegeIDVglAusgabe hinzu (Array wegeIDVglAusgabe noch leer)
        if(wegeIDVglAusgabe.length == 0){
            wegeIDVglAusgabe.push(wegeID1);
            wegeIDVglAusgabe.push(wegeID2);
        }

        var hilf1 = false;
        var hilf2 = false;

        // Wenn neue wegeID noch nicht im Array wegeIDVglAusgabe enthalten ist füge neue wegeID hinzu

        wegeIDVglAusgabe.forEach(function(element) {
            if(element == wegeID1){
                hilf1 = true;
            }
            if(element == wegeID2){
                hilf2 = true;
            }
        });

        if(hilf1 == false){
            wegeIDVglAusgabe.push(wegeID1);
        }
        if(hilf2 == false){
            wegeIDVglAusgabe.push(wegeID2);
        }

        // Ausgabe Wegepaare
        var wegepaarNeu = "<b class='content'>Wegepaar: </b>" + "<span class='content'>"+ index +"</span>" +
            "<br class='content'>WegeID 1: </br>" + "<span class='content'>" + wegeID1 +"</span>" +
            "<br class='content'>WegeID 2: </br>" + "<span class='content'>" + wegeID2 +"</span>" +
            "<br class='content'>UserID: </br>" + "<span class='content'>" + userIDvgl +"</span>" +"<p></p>";
        var sel = document.getElementById("AusgabeFilter");
        var wegepaar = document.createElement('Wegepaar');
        wegepaar.innerHTML = wegepaarNeu;
        wegepaar.value = wegepaarNeu;
        sel.appendChild(wegepaar);

    });

    console.log("wegeIDVglAusgabe");
    console.log(wegeIDVglAusgabe);

    // load selected JSON Files
    let filesAuswahl = document.getElementById("jsonFiles").files;

    // read selected JSON Files
    for(file of filesAuswahl) {
        let readerAuswahl = new FileReader();
        readerAuswahl.onload = function (f) {
            let content = JSON.parse(f.target.result);

            // Speichere akutelle WegeID
            var aktuelleWegeId = content[0]["a0_wayUUID"];

            // gehe durch Array wegeIDVglAusgabe (alle gefilterten wegeIDs)
            for(var a = 0; a < wegeIDVglAusgabe.length; a++){

                // wenn aktueller Weg in wegeIDVglAusgabe enthalten gehe weiter
                if(wegeIDVglAusgabe[a] == aktuelleWegeId){

                    // looping through wayStages
                    let wayStage = (content[0]["a5_wayStages"])
                    //console.log(wayStage)

                    var alleWayStages = "";
                    var f = 0;

                    // looping though coordinatesList
                    for (var i = 0; i < wayStage.length; i++) {

                        let cor = (wayStage[i]["a3_coordinatesList"])

                        var anzC = 0;
                        var lat ;
                        var lng ;

                        var zaehler = "";

                        for(var c = 0; c < wegedatenKoordinaten.length; c++){
                            if(aktuelleWegeId == wegedatenKoordinaten[c]["WegeID"]){
                                zaehler = c;
                            }
                        }

                        for (var d = 0; d < cor.length; d++){
                            lat = cor[d]["coordinate_lat"];
                            lng = cor[d]["coordinate_lng"];
                            coordinates_lat.push(lat);
                            coordinates_lng.push(lng);
                            anzC = anzC + 1;
                        }
                        console.log(anzC);

                        var aLatN = wegedatenKoordinaten[zaehler][f];
                        var aLngN = wegedatenKoordinaten[zaehler][f+1];

                        var aLatL = wegedatenKoordinaten[zaehler][f+2];
                        var aLngL = wegedatenKoordinaten[zaehler][f+3];

                        f = f + 4;

                        console.log("lat[0]: " + aLatN);
                        console.log("lng[0]: " + aLngN);

                        console.log("lat[anzC]: " + aLatL);
                        console.log("lng[anzC]: " + aLngL);

                        // speichere Verkehrsmittel der Etappe/wayStage
                        let vm = (wayStage[i]["a0_mode"]);

                        for(var b = 0; b < verkehrsmittel.length; b++){
                            if(verkehrsmittel[b] == vm){
                                // wenn Verkehrsmittel im Filter gesetzt wurde und mit Verkehrsmittel des wayStages übereinstimmt zeichne Weg

                                var coordinateTuples = []
                                if (wayStage[i]["a3_coordinatesList"] !== undefined) {
                                    let coordinate = (wayStage[i]["a3_coordinatesList"])

                                    var farbe = "";

                                    // adding pairs of coordinates to list
                                    for (var j = 0; j < coordinate.length; j++) {
                                        coordinateTuples.push([coordinate[j]['coordinate_lat'], coordinate[j]['coordinate_lng']]);
                                    }

                                    // polyline random color picker
                                    function get_random_color() {
                                        var letters = '0123456789ABCDEF'.split('');
                                        var color = '#';
                                        for (var k = 0; k < 6; k++) {
                                            color += letters[Math.round(Math.random() * 15)];
                                        }
                                        farbe = color;
                                        return color;
                                    }

                                    // creating poly line options
                                    var polyLineOptions = {color: get_random_color()};

                                    polyline = new L.Polyline(coordinateTuples, polyLineOptions).addTo(map);
                                    polylines.push(polyline);

                                    // speichere Wegeinfo für Ausgabe

                                    var einWayStage =  "<span class='test' style='color:" + farbe+ ";'><br><b class='content'>WayStage: </b>" + "<span class='content'>"+ i +
                                        "</span>"+ "<br><span class='content'>Verkehrsmittel: </span>" + "<span class='content'>"+ wayStage[i]["a0_mode"] +"</span>" +
                                        "<br><span class='content'>Dauer: </span>" + "<span class='content'>"+ wayStage[i]["a1_duration"] +"</span>"+
                                        "<br><span class='content'>Distanz: </span>" + "<span class='content'>"+ wayStage[i]["a2_distance"] +"</span>"+
                                        "<br><span class='content'>lat[0]: </span>" + "<span class='content'>"+ aLatN +"</span>" +
                                        "<br><span class='content'>lng[0]: </span>" + "<span class='content'>"+ aLngN +"</span>" + "<br><span class='content'>lat[anzC]: </span>" +
                                        "<span class='content'>"+ aLatL +"</span>" + "<br><span class='content'>lng[anzC]: </span>" + "<span class='content'>"+ aLngL +"</span>" ;

                                    console.log("Farbe" + farbe);
                                    //console.log(einWayStage);

                                    alleWayStages = alleWayStages + einWayStage;

                                }
                            }
                        }
                    }

                    // Ausgabe mit Wegedaten des gezeichneten Weges befüllen
                    var wegeInfo = "<b class='content'>WegeID: </b>" + "<span class='content'>"+ content[0]["a0_wayUUID"] +"</span>" +
                        "<br><b class='content'>NutzerID: </b>" + "<span class='content'>" + content[0]["a6_userID"] +"</span>" +
                        "<br><b class='content'>NutzerID (nicht ausgewertet): </b>" + "<span class='content'>" + content[0]["a7_userID"] +"</span>" +
                        "<br><b class='content'>Wegezweck: </b>" + "<span class='content'>" +content[0]["a4_purpose"]  +"</span>" +
                        "<br><b class='content'>Start: </b>" + "<span class='content'>"+ content[0]["a1_startTime"] +"</span>" +
                        "<br><b class='content'>Dauer: </b>" + "<span class='content'>"+content[0]["a2_duration"] +"</span>" +
                        "<br><b class='content'>Distanz: </b>" + "<span class='content'>"+ content[0]["a3_distance"] +
                        "</span>" + "<br><b class='content'>WayStages: </b>" + alleWayStages + "<p></p>";
                    var sel = document.getElementById("AusgabeFilter");
                    var weg = document.createElement('Weg');
                    weg.innerHTML = wegeInfo;
                    weg.value = wegeInfo;
                    sel.appendChild(weg);
                }
            }
        }
        readerAuswahl.readAsText(file);
    }

} // Ende ausgabeWegVgl()
//Ende Ausgabe und Zeichnen Funktion

//X sonstige Funktionen

function vergleichsFunktion(lat1, lon1, lat2, lon2){

    const R = 6371e3; // Meter
    const φ1 = lat1 * Math.PI/180; // φ, λ in radian
    const φ2 = lat2 * Math.PI/180;
    const Δφ = (lat2-lat1) * Math.PI/180;
    const Δλ = (lon2-lon1) * Math.PI/180;

    const a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +
        Math.cos(φ1) * Math.cos(φ2) *
        Math.sin(Δλ/2) * Math.sin(Δλ/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

    const d = R * c; // in Metern

    console.log("Distanz in Metern");
    console.log(d);

    return d;
} //vergleichsFunktion

function vergleichsFunktionZeit(ankunft, abfahrt) {

    console.log(ankunft);
    console.log(abfahrt);
    if(ankunft == 0 && abfahrt != 0){
        var year = abfahrt.getUTCFullYear();
        var month = abfahrt.getUTCMonth();
        var day = abfahrt.getUTCDate();
        ankunft = new Date(year, month, day, 0, 0, 0);
        console.log(ankunft);
    } else {
        if(ankunft != 0 && abfahrt == 0){
            var year = ankunft.getUTCFullYear();
            var month = ankunft.getUTCMonth();
            var day = ankunft.getUTCDate();
            abfahrt = new Date(year, month, day, 0, 0, 0);
            console.log(abfahrt);
        } else {
            ankunft = new Date(0, 0, 0, 0, 0, 0);
            abfahrt = new Date(0, 0, 0, 0, 0, 0);

        }

    }

    var umstiegszeitMS = (abfahrt.getTime() - ankunft.getTime());
    console.log("umstiegszeitMS")
    console.log(umstiegszeitMS);

    return umstiegszeitMS;
} //vergleichsFunktionZeit()

function millisekundenInDateWandeln(wertMS, datum) {

    var wertSec = wertMS/1000;
    console.log("wertSec")
    console.log(wertSec);

    console.log(datum);

    function fuehrendeNull(wert) {
        if (wert < 10) return "0" + parseInt(wert);
        else return parseInt(wert);
    }

    var jahr = datum.getUTCFullYear();
    var monat = datum.getMonth();
    var tag = datum.getDate();
    var stu = fuehrendeNull((wertSec/60/60)%24);
    var min = fuehrendeNull((wertSec/60)%60);
    var sec = fuehrendeNull(wertSec%60);

    console.log(jahr, monat, tag, stu, min, sec);
    var daterueck = new Date(jahr, monat, tag, stu, min, sec);

    return daterueck;
} //millisekundenInDateWandeln(wertMS)



function waehleWege(wegeIDVglWegepaare, wegeIDVglKoordinaten, wegeIDVglKoordinatenUmstieg, wegeIDVglStartzeit, wegeIDVglDauerUmstieg, wegeIDVglWegezweck, wegeIDVglVerkehrsmittel) {

    document.getElementById("box9").style.display = "block";

    console.log("waehleWege()");

    //Anzahl der Wegepaare, die Vergleichsfiltern entsprechen
    console.log("wegeIDVglWegepaare.length");
    console.log(wegeIDVglWegepaare.length);
    console.log("mittelwerteWegepaare");
    console.log(mittelwerteWegepaare);
    console.log("wegeIDVglKoordinaten.length");
    console.log(wegeIDVglKoordinaten.length);
    console.log("wegeIDVglKoordinatenUmstieg.length");
    console.log(wegeIDVglKoordinatenUmstieg.length);
    console.log("wegeIDVglStartzeit.length");
    console.log(wegeIDVglStartzeit.length);
    console.log("wegeIDVglDauerUmstieg.length");
    console.log(wegeIDVglDauerUmstieg.length);
    console.log("wegeIDVglWegezweck.length");
    console.log(wegeIDVglWegezweck.length);
    console.log("wegeIDVglVerkehrsmittel.length");
    console.log(wegeIDVglVerkehrsmittel.length);

    anzahlAlleGrobGefiltertenWegepaare = wegeIDVglWegepaare.length;
    var ergebnisseFilter = "<b class='content'>Anzahl aller grob gefilterten Wegepaare: </b>" + "<span class='content'>"+ anzahlAlleGrobGefiltertenWegepaare + "</span>" +
        "<br><b class='content'>Anzahl Wege, die Vergleichskriterium entsprechen: </b>" +
        "<br><b class='content'>Koordinaten: </b>" + "<span class='content'>"+ wegeIDVglKoordinaten.length + "</span>" +
        "<br><b class='content'>Umstiegsweg: </b>" + "<span class='content'>"+ wegeIDVglKoordinatenUmstieg.length + "</span>" +
        "<br><b class='content'>Startzeit: </b>" + "<span class='content'>"+ wegeIDVglStartzeit.length + "</span>" +
        "<br><b class='content'>Umstiegsdauer: </b>" + "<span class='content'>"+ wegeIDVglDauerUmstieg.length + "</span>" +
        "<br><b class='content'>Wegezweck: </b>" + "<span class='content'>"+ wegeIDVglWegezweck.length + "</span>" +
        "<br><b class='content'>Verkehrsmittel: </b>" + "<span class='content'>"+ wegeIDVglVerkehrsmittel.length +"</span>"+ "<p></p>";
    var sel = document.getElementById("AusgabeErgebnis");
    var erg = document.createElement('Ergebnis');
    erg.innerHTML = ergebnisseFilter;
    erg.value = ergebnisseFilter;
    sel.appendChild(erg);

}//Ende waehleWege()

function sammlePassendeWegepaare(){

    console.log("sammlePassendeWegepaare");

    console.log("wegeIDVglKoordinaten");
    console.log(wegeIDVglKoordinaten);
    console.log("wegeIDVglKoordinatenUmstieg");
    console.log(wegeIDVglKoordinatenUmstieg);
    console.log("wegeIDVglStartzeit");
    console.log(wegeIDVglStartzeit);
    console.log("wegeIDVglDauerUmstieg");
    console.log(wegeIDVglDauerUmstieg);
    console.log("wegeIDVglWegezweck");
    console.log(wegeIDVglWegezweck);
    console.log("wegeIDVglVerkehrsmittel");
    console.log(wegeIDVglVerkehrsmittel);

    // Abfrage nach gewählten Vergleichsmethoden
    var checkboxChecked = new Array();
    var checkboxesvergleichsfilter = document.getElementsByName("vergleichsfilter");
    for(var i = 0; i < checkboxesvergleichsfilter.length; i++)
    {
        switch (checkboxesvergleichsfilter[i].value) {
            case "Koordinaten":
                if(checkboxesvergleichsfilter[i].checked){
                    checkboxChecked.push(wegeIDVglKoordinaten);
                    gewaehlteFilter.push("Koordinaten");
                    console.log("Koordinaten gewählt push wegeIDVglKoordinaten");}
                break;
            case "Umstiegsweg":
                if(checkboxesvergleichsfilter[i].checked){
                    checkboxChecked.push(wegeIDVglKoordinatenUmstieg);
                    gewaehlteFilter.push("Umstiegsweg");
                    console.log("KoordinatenUmstieg gewählt push wegeIDVglKoordinatenUmstieg");}
                break;
            case "Startzeit":
                if(checkboxesvergleichsfilter[i].checked){
                    checkboxChecked.push(wegeIDVglStartzeit);
                    gewaehlteFilter.push("Startzeit");
                    console.log("Startzeit gewählt push wegeIDVglStartzeit");}
                break;
            case "Umstiegsdauer":
                if(checkboxesvergleichsfilter[i].checked){
                    checkboxChecked.push(wegeIDVglDauerUmstieg);
                    gewaehlteFilter.push("Umstiegsdauer");
                    console.log("Umstiegsdauer gewählt push wegeIDVglDauerUmstieg");}
                break;
            case "Wegezweck":
                if(checkboxesvergleichsfilter[i].checked){
                    checkboxChecked.push(wegeIDVglWegezweck);
                    gewaehlteFilter.push("Wegezweck");
                    console.log("Wegezweck gewählt push wegeIDVglWegezweck");}
                break;
            case "Verkehrsmittel":
                if(checkboxesvergleichsfilter[i].checked){
                    checkboxChecked.push(wegeIDVglVerkehrsmittel);
                    gewaehlteFilter.push("Verkehrsmittel");
                    console.log("Verkehrsmittel gewählt push wegeIDVglVerkehrsmittel");}
                break;
            default:
                break;
        }
    }

    console.log("checkboxChecked.length");
    console.log(checkboxChecked.length);

    var ergebnis = new Array();

    switch (checkboxChecked.length) {
        case 1:
            console.log("1 Element gewählt");
            var array = checkboxChecked[0];
            array.forEach(function(element){
                wegeIDVglWegepaareFilter.push(element);
            });
            break;
        case 2:
            console.log("2 Elemente gewählt");
            console.log(checkboxChecked[0]);
            console.log(checkboxChecked[1]);
            ergebnis = getArraysIntersection(checkboxChecked[0], checkboxChecked[1]);
            console.log("ergebnis");
            console.log(ergebnis);
            break;
        case 3:
            console.log("3 Elemente gewählt");
            ergebnis = getArraysIntersection(checkboxChecked[0], checkboxChecked[1], checkboxChecked[2]);
            console.log("ergebnis");
            console.log(ergebnis);
            break;
        case 4:
            console.log("4 Elemente gewählt");
            ergebnis = getArraysIntersection(checkboxChecked[0], checkboxChecked[1], checkboxChecked[2], checkboxChecked[3]);
            console.log("ergebnis");
            console.log(ergebnis);
            break;
        case 5:
            console.log("5 Elemente gewählt");
            ergebnis = getArraysIntersection(checkboxChecked[0], checkboxChecked[1], checkboxChecked[2], checkboxChecked[3], checkboxChecked[4]);
            console.log("ergebnis");
            console.log(ergebnis);
            break;
        case 6:
            console.log("6 Elemente gewählt");
            ergebnis = getArraysIntersection(checkboxChecked[0], checkboxChecked[1], checkboxChecked[2], checkboxChecked[3], checkboxChecked[4], checkboxChecked[5]);
            console.log("ergebnis");
            console.log(ergebnis);
            break;
        default:
            break;
    }

    //speichere nur ein Wegepaar mit den gleichen beiden Wegen
    ergebnis.forEach(function(element){
        if (wegeIDVglWegepaareFilter.includes(element) == false){
            wegeIDVglWegepaareFilter.push(element);
        }
    });

    console.log("wegeIDVglWegepaareFilter Ende sammlePassendeWegepaare()");
    console.log(wegeIDVglWegepaareFilter);

    return  wegeIDVglWegepaareFilter;
}//Ende sammlePassendeWegepaare()


function getArraysIntersection(list1, list2, ...otherLists) {
    const result = [];

    for (let i = 0; i < list1.length; i++) {
        let item1 = list1[i];
        let found = false;
        for (var j = 0; j < list2.length && !found; j++) {
            found = (item1["WegeID 1"] === list2[j]["WegeID 1"] && item1["WegeID 2"] === list2[j]["WegeID 2"]);
        }
        if (found === true) {
            result.push(item1);
        }
    }
    if (otherLists.length) {
        return getArraysIntersection(result, otherLists.shift(), ...otherLists);
    }
    else {
        return result;
    }
}

//Ende sonstige Funktionen

//Ende Funkionen